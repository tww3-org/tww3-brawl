import{I as re,j as s,h as y,J as be,r as O,K as de,o as Ke,L as Me,M as Xe,N as we,O as ue,P as qe,Q as ht,R as pe,S as Be,T as xe,U as bt,V as yt,W as Wt,X as kt,e as Ct,Y as rt,Z as Re,$ as Yt,a0 as Gt,a1 as St,a2 as Jt,d as me,t as D,v as N,x as q,B as $e,a3 as ve,y as G,z as U,A as E,_ as Se,H as le,a4 as ie,a5 as he,a6 as ke,a7 as B,a8 as Zt}from"./Dv7q4p4h.js";import{u as wt,a as qt,Q as xt,b as en,n as $t,c as tn,g as nn,d as an,_ as ce,e as on,f as ln,h as Ut,i as Fe,j as rn,k as sn,l as un,m as cn,o as Ce,p as dn,q as vn,r as mn,s as Bt,v as Ee,t as fn,w as _n,x as gn,y as pn,z as hn,A as bn,B as yn,C as kn,D as Cn,E as Sn,F as wn,G as qn}from"./BBc3bFt3.js";import{h as Nt,a as fe,u as We,b as Ye,c as Mt,d as xn,_ as $n}from"./B_r7909G.js";import Un from"./HnCkYsrN.js";const Bn=re({name:"QAvatar",props:{...wt,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(e,{slots:n}){const o=qt(e),i=s(()=>"q-avatar"+(e.color?` bg-${e.color}`:"")+(e.textColor?` text-${e.textColor} q-chip--colored`:"")+(e.square===!0?" q-avatar--square":e.rounded===!0?" rounded-borders":"")),t=s(()=>e.fontSize?{fontSize:e.fontSize}:null);return()=>{const a=e.icon!==void 0?[y(xt,{name:e.icon})]:void 0;return y("div",{class:i.value,style:o.value},[y("div",{class:"q-avatar__content row flex-center overflow-hidden",style:t.value},Nt(n.default,a))])}}}),Nn=re({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:n}){const o=s(()=>{const i=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(t=>e[t]===!0).map(t=>`q-btn-group--${t}`).join(" ");return`q-btn-group row no-wrap${i.length!==0?" "+i:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>y("div",{class:o.value},fe(n.default))}}),Mn=Object.keys($t);function Pn(e){return Mn.reduce((n,o)=>{const i=e[o];return i!==void 0&&(n[o]=i),n},{})}const Ln=re({name:"QBtnDropdown",props:{...$t,...en,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,noRefocus:Boolean,noFocus:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:n,emit:o}){const{proxy:i}=be(),t=O(e.modelValue),a=O(null),l=tn(),r=s(()=>{const b={"aria-expanded":t.value===!0?"true":"false","aria-haspopup":"true","aria-controls":l.value,"aria-label":e.toggleAriaLabel||i.$q.lang.label[t.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(b["aria-disabled"]="true"),b}),c=s(()=>"q-btn-dropdown__arrow"+(t.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),u=s(()=>nn(e)),d=s(()=>Pn(e));de(()=>e.modelValue,b=>{var C;(C=a.value)==null||C[b?"show":"hide"]()}),de(()=>e.split,S);function m(b){t.value=!0,o("beforeShow",b)}function f(b){o("show",b),o("update:modelValue",!0)}function _(b){t.value=!1,o("beforeHide",b)}function g(b){o("hide",b),o("update:modelValue",!1)}function k(b){o("click",b)}function x(b){Me(b),S(),o("click",b)}function P(b){var C;(C=a.value)==null||C.toggle(b)}function V(b){var C;(C=a.value)==null||C.show(b)}function S(b){var C;(C=a.value)==null||C.hide(b)}return Object.assign(i,{show:V,hide:S,toggle:P}),Ke(()=>{e.modelValue===!0&&V()}),()=>{const b=[y(xt,{class:c.value,name:e.dropdownIcon||i.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&b.push(y(an,{ref:a,id:l.value,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noEscDismiss:e.noEscDismiss,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,noFocus:e.noFocus,noRefocus:e.noRefocus,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:m,onShow:f,onBeforeHide:_,onHide:g},n.default)),e.split===!1?y(ce,{class:"q-btn-dropdown q-btn-dropdown--simple",...d.value,...r.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:k},{default:()=>fe(n.label,[]).concat(b),loading:n.loading}):y(Nn,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...u.value,glossy:e.glossy,stretch:e.stretch},()=>[y(ce,{class:"q-btn-dropdown--current",...d.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:x},{default:n.label,loading:n.loading}),y(ce,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...r.value,...u.value,disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},()=>b)])}}}),Ge=re({name:"QCard",props:{...We,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:n}){const{proxy:{$q:o}}=be(),i=Ye(e,o),t=s(()=>"q-card"+(i.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>y(e.tag,{class:t.value},fe(n.default))}}),Tn=re({name:"QCardActions",props:{...on,vertical:Boolean},setup(e,{slots:n}){const o=ln(e),i=s(()=>`q-card__actions ${o.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>y("div",{class:i.value},fe(n.default))}}),Je=re({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:n}){const o=s(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>y(e.tag,{class:o.value},fe(n.default))}}),Ze={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},Vn=Object.keys(Ze);Ze.all=!0;function Pe(e){const n={};for(const o of Vn)e[o]===!0&&(n[o]=!0);return Object.keys(n).length===0?Ze:(n.horizontal===!0?n.left=n.right=!0:n.left===!0&&n.right===!0&&(n.horizontal=!0),n.vertical===!0?n.up=n.down=!0:n.up===!0&&n.down===!0&&(n.vertical=!0),n.horizontal===!0&&n.vertical===!0&&(n.all=!0),n)}const An=["INPUT","TEXTAREA"];function Le(e,n){return n.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof n.handler=="function"&&An.includes(e.target.nodeName.toUpperCase())===!1&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(n.uid)===-1)}function Dn(e){const n=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((o,i)=>{const t=parseFloat(o);t&&(n[i]=t)}),n}const In=Xe({name:"touch-swipe",beforeMount(e,{value:n,arg:o,modifiers:i}){if(i.mouse!==!0&&ue.has.touch!==!0)return;const t=i.mouseCapture===!0?"Capture":"",a={handler:n,sensitivity:Dn(o),direction:Pe(i),noop:ht,mouseStart(l){Le(l,a)&&bt(l)&&(pe(a,"temp",[[document,"mousemove","move",`notPassive${t}`],[document,"mouseup","end","notPassiveCapture"]]),a.start(l,!0))},touchStart(l){if(Le(l,a)){const r=l.target;pe(a,"temp",[[r,"touchmove","move","notPassiveCapture"],[r,"touchcancel","end","notPassiveCapture"],[r,"touchend","end","notPassiveCapture"]]),a.start(l)}},start(l,r){ue.is.firefox===!0&&qe(e,!0);const c=xe(l);a.event={x:c.left,y:c.top,time:Date.now(),mouse:r===!0,dir:!1}},move(l){if(a.event===void 0)return;if(a.event.dir!==!1){Be(l);return}const r=Date.now()-a.event.time;if(r===0)return;const c=xe(l),u=c.left-a.event.x,d=Math.abs(u),m=c.top-a.event.y,f=Math.abs(m);if(a.event.mouse!==!0){if(d<a.sensitivity[1]&&f<a.sensitivity[1]){a.end(l);return}}else if(window.getSelection().toString()!==""){a.end(l);return}else if(d<a.sensitivity[2]&&f<a.sensitivity[2])return;const _=d/r,g=f/r;a.direction.vertical===!0&&d<f&&d<100&&g>a.sensitivity[0]&&(a.event.dir=m<0?"up":"down"),a.direction.horizontal===!0&&d>f&&f<100&&_>a.sensitivity[0]&&(a.event.dir=u<0?"left":"right"),a.direction.up===!0&&d<f&&m<0&&d<100&&g>a.sensitivity[0]&&(a.event.dir="up"),a.direction.down===!0&&d<f&&m>0&&d<100&&g>a.sensitivity[0]&&(a.event.dir="down"),a.direction.left===!0&&d>f&&u<0&&f<100&&_>a.sensitivity[0]&&(a.event.dir="left"),a.direction.right===!0&&d>f&&u>0&&f<100&&_>a.sensitivity[0]&&(a.event.dir="right"),a.event.dir!==!1?(Be(l),a.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Ut(),a.styleCleanup=k=>{a.styleCleanup=void 0,document.body.classList.remove("non-selectable");const x=()=>{document.body.classList.remove("no-pointer-events--children")};k===!0?setTimeout(x,50):x()}),a.handler({evt:l,touch:a.event.mouse!==!0,mouse:a.event.mouse,direction:a.event.dir,duration:r,distance:{x:d,y:f}})):a.end(l)},end(l){var r;a.event!==void 0&&(we(a,"temp"),ue.is.firefox===!0&&qe(e,!1),(r=a.styleCleanup)==null||r.call(a,!0),l!==void 0&&a.event.dir!==!1&&Be(l),a.event=void 0)}};if(e.__qtouchswipe=a,i.mouse===!0){const l=i.mouseCapture===!0||i.mousecapture===!0?"Capture":"";pe(a,"main",[[e,"mousedown","mouseStart",`passive${l}`]])}ue.has.touch===!0&&pe(a,"main",[[e,"touchstart","touchStart",`passive${i.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,n){const o=e.__qtouchswipe;o!==void 0&&(n.oldValue!==n.value&&(typeof n.value!="function"&&o.end(),o.handler=n.value),o.direction=Pe(n.modifiers))},beforeUnmount(e){var o;const n=e.__qtouchswipe;n!==void 0&&(we(n,"main"),we(n,"temp"),ue.is.firefox===!0&&qe(e,!1),(o=n.styleCleanup)==null||o.call(n),delete e.__qtouchswipe)}});function Rn(){let e=Object.create(null);return{getCache:(n,o)=>e[n]===void 0?e[n]=typeof o=="function"?o():o:e[n],setCache(n,o){e[n]=o},hasCache(n){return Object.hasOwnProperty.call(e,n)},clearCache(n){n!==void 0?delete e[n]:e=Object.create(null)}}}const En={name:{required:!0},disable:Boolean},st={setup(e,{slots:n}){return()=>y("div",{class:"q-panel scroll",role:"tabpanel"},fe(n.default))}},zn={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},Fn=["update:modelValue","beforeTransition","transition"];function On(){const{props:e,emit:n,proxy:o}=be(),{getCache:i}=Rn(),{registerTimeout:t}=Fe();let a,l;const r=O(null),c={value:null};function u(h){const L=e.vertical===!0?"up":"left";W((o.$q.lang.rtl===!0?-1:1)*(h.direction===L?1:-1))}const d=s(()=>[[In,u,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),m=s(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),f=s(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),_=s(()=>`--q-transition-duration: ${e.transitionDuration}ms`),g=s(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),k=s(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),x=s(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);de(()=>e.modelValue,(h,L)=>{const z=b(h)===!0?C(h):-1;l!==!0&&I(z===-1?0:z<C(L)?-1:1),c.value!==z&&(c.value=z,n("beforeTransition",h,L),t(()=>{n("transition",h,L)},e.transitionDuration))});function P(){W(1)}function V(){W(-1)}function S(h){n("update:modelValue",h)}function b(h){return h!=null&&h!==""}function C(h){return a.findIndex(L=>L.props.name===h&&L.props.disable!==""&&L.props.disable!==!0)}function X(){return a.filter(h=>h.props.disable!==""&&h.props.disable!==!0)}function I(h){const L=h!==0&&e.animated===!0&&c.value!==-1?"q-transition--"+(h===-1?m.value:f.value):null;r.value!==L&&(r.value=L)}function W(h,L=c.value){let z=L+h;for(;z!==-1&&z<a.length;){const Q=a[z];if(Q!==void 0&&Q.props.disable!==""&&Q.props.disable!==!0){I(h),l=!0,n("update:modelValue",Q.props.name),setTimeout(()=>{l=!1});return}z+=h}e.infinite===!0&&a.length!==0&&L!==-1&&L!==a.length&&W(h,h===-1?a.length:-1)}function J(){const h=C(e.modelValue);return c.value!==h&&(c.value=h),!0}function A(){const h=b(e.modelValue)===!0&&J()&&a[c.value];return e.keepAlive===!0?[y(Wt,k.value,[y(x.value===!0?i(g.value,()=>({...st,name:g.value})):st,{key:g.value,style:_.value},()=>h)])]:[y("div",{class:"q-panel scroll",style:_.value,key:g.value,role:"tabpanel"},[h])]}function H(){if(a.length!==0)return e.animated===!0?[y(yt,{name:r.value},A)]:A()}function $(h){return a=rn(fe(h.default,[])).filter(L=>L.props!==null&&L.props.slot===void 0&&b(L.props.name)===!0),a.length}function p(){return a}return Object.assign(o,{next:P,previous:V,goTo:S}),{panelIndex:c,panelDirectives:d,updatePanelsList:$,updatePanelIndex:J,getPanelContent:H,getEnabledPanels:X,getPanels:p,isValidPanelName:b,keepAliveProps:k,needsUniqueKeepAliveWrapper:x,goToPanelByOffset:W,goToPanel:S,nextPanel:P,previousPanel:V}}const jn=["top","right","bottom","left"],Hn=["regular","flat","outline","push","unelevated"],Qn=re({name:"QCarousel",props:{...We,...zn,...un,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:e=>Hn.includes(e),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:e=>jn.includes(e)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...sn,...Fn],setup(e,{slots:n}){const{proxy:{$q:o}}=be(),i=Ye(e,o);let t=null,a;const{updatePanelsList:l,getPanelContent:r,panelDirectives:c,goToPanel:u,previousPanel:d,nextPanel:m,getEnabledPanels:f,panelIndex:_}=On(),{inFullscreen:g}=cn(),k=s(()=>g.value!==!0&&e.height!==void 0?{height:e.height}:{}),x=s(()=>e.vertical===!0?"vertical":"horizontal"),P=s(()=>e.navigationPosition||(e.vertical===!0?"right":"bottom")),V=s(()=>`q-carousel q-panel-parent q-carousel--with${e.padding===!0?"":"out"}-padding`+(g.value===!0?" fullscreen":"")+(i.value===!0?" q-carousel--dark q-dark":"")+(e.arrows===!0?` q-carousel--arrows-${x.value}`:"")+(e.navigation===!0?` q-carousel--navigation-${P.value}`:"")),S=s(()=>{const A=[e.prevIcon||o.iconSet.carousel[e.vertical===!0?"up":"left"],e.nextIcon||o.iconSet.carousel[e.vertical===!0?"down":"right"]];return e.vertical===!1&&o.lang.rtl===!0?A.reverse():A}),b=s(()=>e.navigationIcon||o.iconSet.carousel.navigationIcon),C=s(()=>e.navigationActiveIcon||b.value),X=s(()=>({color:e.controlColor,textColor:e.controlTextColor,round:!0,[e.controlType]:!0,dense:!0}));de(()=>e.modelValue,()=>{e.autoplay&&I()}),de(()=>e.autoplay,A=>{A?I():t!==null&&(clearTimeout(t),t=null)});function I(){const A=kt(e.autoplay)===!0?Math.abs(e.autoplay):5e3;t!==null&&clearTimeout(t),t=setTimeout(()=>{t=null,A>=0?m():d()},A)}Ke(()=>{e.autoplay&&I()}),Ct(()=>{t!==null&&clearTimeout(t)});function W(A,H){return y("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${A} q-carousel__navigation--${P.value}`+(e.controlColor!==void 0?` text-${e.controlColor}`:"")},[y("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},f().map(H))])}function J(){const A=[];if(e.navigation===!0){const H=n["navigation-icon"]!==void 0?n["navigation-icon"]:p=>y(ce,{key:"nav"+p.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${p.active===!0?"":"in"}active`,...p.btnProps,onClick:p.onClick}),$=a-1;A.push(W("buttons",(p,h)=>{const L=p.props.name,z=_.value===h;return H({index:h,maxIndex:$,name:L,active:z,btnProps:{icon:z===!0?C.value:b.value,size:"sm",...X.value},onClick:()=>{u(L)}})}))}else if(e.thumbnails===!0){const H=e.controlColor!==void 0?` text-${e.controlColor}`:"";A.push(W("thumbnails",$=>{const p=$.props;return y("img",{key:"tmb#"+p.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${p.name===e.modelValue?"":"in"}active`+H,src:p.imgSrc||p["img-src"],onClick:()=>{u(p.name)}})}))}return e.arrows===!0&&_.value>=0&&((e.infinite===!0||_.value>0)&&A.push(y("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${x.value} absolute flex flex-center`},[y(ce,{icon:S.value[0],...X.value,onClick:d})])),(e.infinite===!0||_.value<a-1)&&A.push(y("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${x.value} absolute flex flex-center`},[y(ce,{icon:S.value[1],...X.value,onClick:m})]))),xn(n.control,A)}return()=>(a=l(n),y("div",{class:V.value,style:k.value},[Mt("div",{class:"q-carousel__slides-container"},r(),"sl-cont",e.swipeable,()=>c.value)].concat(J())))}}),Kn=re({name:"QCarouselSlide",props:{...En,imgSrc:String},setup(e,{slots:n}){const o=s(()=>e.imgSrc?{backgroundImage:`url("${e.imgSrc}")`}:{});return()=>y("div",{class:"q-carousel__slide",style:o.value},fe(n.default))}}),Xn={...wt,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},Oe=50,Pt=2*Oe,Lt=Pt*Math.PI,Wn=Math.round(Lt*1e3)/1e3,Yn=re({name:"QCircularProgress",props:{...Xn,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(e,{slots:n}){const{proxy:{$q:o}}=be(),i=qt(e),t=s(()=>{const _=(o.lang.rtl===!0?-1:1)*e.angle;return{transform:e.reverse!==(o.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-_}deg)`:`rotate3d(0, 0, 1, ${_-90}deg)`}}),a=s(()=>e.instantFeedback!==!0&&e.indeterminate!==!0?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:""),l=s(()=>Pt/(1-e.thickness/2)),r=s(()=>`${l.value/2} ${l.value/2} ${l.value} ${l.value}`),c=s(()=>Ce(e.value,e.min,e.max)),u=s(()=>e.max-e.min),d=s(()=>e.thickness/2*l.value),m=s(()=>{const _=(e.max-c.value)/u.value,g=e.rounded===!0&&c.value<e.max&&_<.25?d.value/2*(1-_/.25):0;return Lt*_+g});function f({thickness:_,offset:g,color:k,cls:x,rounded:P}){return y("circle",{class:"q-circular-progress__"+x+(k!==void 0?` text-${k}`:""),style:a.value,fill:"transparent",stroke:"currentColor","stroke-width":_,"stroke-dasharray":Wn,"stroke-dashoffset":g,"stroke-linecap":P,cx:l.value,cy:l.value,r:Oe})}return()=>{const _=[];e.centerColor!==void 0&&e.centerColor!=="transparent"&&_.push(y("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:Oe-d.value/2,cx:l.value,cy:l.value})),e.trackColor!==void 0&&e.trackColor!=="transparent"&&_.push(f({cls:"track",thickness:d.value,offset:0,color:e.trackColor})),_.push(f({cls:"circle",thickness:d.value,offset:m.value,color:e.color,rounded:e.rounded===!0?"round":void 0}));const g=[y("svg",{class:"q-circular-progress__svg",style:t.value,viewBox:r.value,"aria-hidden":"true"},_)];return e.showValue===!0&&g.push(y("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},n.default!==void 0?n.default():[y("div",c.value)])),y("div",{class:`q-circular-progress q-circular-progress--${e.indeterminate===!0?"in":""}determinate`,style:i.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.indeterminate===!0?void 0:c.value},Nt(n.internal,g))}}});function ze(e,n,o){const i=xe(e);let t,a=i.left-n.event.x,l=i.top-n.event.y,r=Math.abs(a),c=Math.abs(l);const u=n.direction;u.horizontal===!0&&u.vertical!==!0?t=a<0?"left":"right":u.horizontal!==!0&&u.vertical===!0?t=l<0?"up":"down":u.up===!0&&l<0?(t="up",r>c&&(u.left===!0&&a<0?t="left":u.right===!0&&a>0&&(t="right"))):u.down===!0&&l>0?(t="down",r>c&&(u.left===!0&&a<0?t="left":u.right===!0&&a>0&&(t="right"))):u.left===!0&&a<0?(t="left",r<c&&(u.up===!0&&l<0?t="up":u.down===!0&&l>0&&(t="down"))):u.right===!0&&a>0&&(t="right",r<c&&(u.up===!0&&l<0?t="up":u.down===!0&&l>0&&(t="down")));let d=!1;if(t===void 0&&o===!1){if(n.event.isFirst===!0||n.event.lastDir===void 0)return{};t=n.event.lastDir,d=!0,t==="left"||t==="right"?(i.left-=a,r=0,a=0):(i.top-=l,c=0,l=0)}return{synthetic:d,payload:{evt:e,touch:n.event.mouse!==!0,mouse:n.event.mouse===!0,position:i,direction:t,isFirst:n.event.isFirst,isFinal:o===!0,duration:Date.now()-n.event.time,distance:{x:r,y:c},offset:{x:a,y:l},delta:{x:i.left-n.event.lastX,y:i.top-n.event.lastY}}}}let Gn=0;const Jn=Xe({name:"touch-pan",beforeMount(e,{value:n,modifiers:o}){if(o.mouse!==!0&&ue.has.touch!==!0)return;function i(a,l){o.mouse===!0&&l===!0?Be(a):(o.stop===!0&&Me(a),o.prevent===!0&&rt(a))}const t={uid:"qvtp_"+Gn++,handler:n,modifiers:o,direction:Pe(o),noop:ht,mouseStart(a){Le(a,t)&&bt(a)&&(pe(t,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),t.start(a,!0))},touchStart(a){if(Le(a,t)){const l=a.target;pe(t,"temp",[[l,"touchmove","move","notPassiveCapture"],[l,"touchcancel","end","passiveCapture"],[l,"touchend","end","passiveCapture"]]),t.start(a)}},start(a,l){if(ue.is.firefox===!0&&qe(e,!0),t.lastEvt=a,l===!0||o.stop===!0){if(t.direction.all!==!0&&(l!==!0||t.modifiers.mouseAllDir!==!0&&t.modifiers.mousealldir!==!0)){const u=a.type.indexOf("mouse")!==-1?new MouseEvent(a.type,a):new TouchEvent(a.type,a);a.defaultPrevented===!0&&rt(u),a.cancelBubble===!0&&Me(u),Object.assign(u,{qKeyEvent:a.qKeyEvent,qClickOutside:a.qClickOutside,qAnchorHandled:a.qAnchorHandled,qClonedBy:a.qClonedBy===void 0?[t.uid]:a.qClonedBy.concat(t.uid)}),t.initialEvent={target:a.target,event:u}}Me(a)}const{left:r,top:c}=xe(a);t.event={x:r,y:c,time:Date.now(),mouse:l===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:r,lastY:c}},move(a){if(t.event===void 0)return;const l=xe(a),r=l.left-t.event.x,c=l.top-t.event.y;if(r===0&&c===0)return;t.lastEvt=a;const u=t.event.mouse===!0,d=()=>{i(a,u);let _;o.preserveCursor!==!0&&o.preservecursor!==!0&&(_=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),u===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Ut(),t.styleCleanup=g=>{if(t.styleCleanup=void 0,_!==void 0&&(document.documentElement.style.cursor=_),document.body.classList.remove("non-selectable"),u===!0){const k=()=>{document.body.classList.remove("no-pointer-events--children")};g!==void 0?setTimeout(()=>{k(),g()},50):k()}else g!==void 0&&g()}};if(t.event.detected===!0){t.event.isFirst!==!0&&i(a,t.event.mouse);const{payload:_,synthetic:g}=ze(a,t,!1);_!==void 0&&(t.handler(_)===!1?t.end(a):(t.styleCleanup===void 0&&t.event.isFirst===!0&&d(),t.event.lastX=_.position.left,t.event.lastY=_.position.top,t.event.lastDir=g===!0?void 0:_.direction,t.event.isFirst=!1));return}if(t.direction.all===!0||u===!0&&(t.modifiers.mouseAllDir===!0||t.modifiers.mousealldir===!0)){d(),t.event.detected=!0,t.move(a);return}const m=Math.abs(r),f=Math.abs(c);m!==f&&(t.direction.horizontal===!0&&m>f||t.direction.vertical===!0&&m<f||t.direction.up===!0&&m<f&&c<0||t.direction.down===!0&&m<f&&c>0||t.direction.left===!0&&m>f&&r<0||t.direction.right===!0&&m>f&&r>0?(t.event.detected=!0,t.move(a)):t.end(a,!0))},end(a,l){var r;if(t.event!==void 0){if(we(t,"temp"),ue.is.firefox===!0&&qe(e,!1),l===!0)(r=t.styleCleanup)==null||r.call(t),t.event.detected!==!0&&t.initialEvent!==void 0&&t.initialEvent.target.dispatchEvent(t.initialEvent.event);else if(t.event.detected===!0){t.event.isFirst===!0&&t.handler(ze(a===void 0?t.lastEvt:a,t).payload);const{payload:c}=ze(a===void 0?t.lastEvt:a,t,!0),u=()=>{t.handler(c)};t.styleCleanup!==void 0?t.styleCleanup(u):u()}t.event=void 0,t.initialEvent=void 0,t.lastEvt=void 0}}};if(e.__qtouchpan=t,o.mouse===!0){const a=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";pe(t,"main",[[e,"mousedown","mouseStart",`passive${a}`]])}ue.has.touch===!0&&pe(t,"main",[[e,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,n){const o=e.__qtouchpan;o!==void 0&&(n.oldValue!==n.value&&(typeof value!="function"&&o.end(),o.handler=n.value),o.direction=Pe(n.modifiers))},beforeUnmount(e){var o;const n=e.__qtouchpan;n!==void 0&&(n.event!==void 0&&n.end(),we(n,"main"),we(n,"temp"),ue.is.firefox===!0&&qe(e,!1),(o=n.styleCleanup)==null||o.call(n),delete e.__qtouchpan)}}),ut="q-slider__marker-labels",Zn=e=>({value:e}),ea=({marker:e})=>y("div",{key:e.value,style:e.style,class:e.classes},e.label),Tt=[34,37,40,33,39,38],ta={...We,...dn,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},na=["pan","update:modelValue","change"];function aa({updateValue:e,updatePosition:n,getDragging:o,formAttrs:i}){const{props:t,emit:a,slots:l,proxy:{$q:r}}=be(),c=Ye(t,r),u=vn(i),d=O(!1),m=O(!1),f=O(!1),_=O(!1),g=s(()=>t.vertical===!0?"--v":"--h"),k=s(()=>"-"+(t.switchLabelSide===!0?"switched":"standard")),x=s(()=>t.vertical===!0?t.reverse===!0:t.reverse!==(r.lang.rtl===!0)),P=s(()=>isNaN(t.innerMin)===!0||t.innerMin<t.min?t.min:t.innerMin),V=s(()=>isNaN(t.innerMax)===!0||t.innerMax>t.max?t.max:t.innerMax),S=s(()=>t.disable!==!0&&t.readonly!==!0&&P.value<V.value),b=s(()=>{if(t.step===0)return M=>M;const v=(String(t.step).trim().split(".")[1]||"").length;return M=>parseFloat(M.toFixed(v))}),C=s(()=>t.step===0?1:t.step),X=s(()=>S.value===!0?t.tabindex||0:-1),I=s(()=>t.max-t.min),W=s(()=>V.value-P.value),J=s(()=>Te(P.value)),A=s(()=>Te(V.value)),H=s(()=>t.vertical===!0?x.value===!0?"bottom":"top":x.value===!0?"right":"left"),$=s(()=>t.vertical===!0?"height":"width"),p=s(()=>t.vertical===!0?"width":"height"),h=s(()=>t.vertical===!0?"vertical":"horizontal"),L=s(()=>{const v={role:"slider","aria-valuemin":P.value,"aria-valuemax":V.value,"aria-orientation":h.value,"data-step":t.step};return t.disable===!0?v["aria-disabled"]="true":t.readonly===!0&&(v["aria-readonly"]="true"),v}),z=s(()=>`q-slider q-slider${g.value} q-slider--${d.value===!0?"":"in"}active inline no-wrap `+(t.vertical===!0?"row":"column")+(t.disable===!0?" disabled":" q-slider--enabled"+(S.value===!0?" q-slider--editable":""))+(f.value==="both"?" q-slider--focus":"")+(t.label||t.labelAlways===!0?" q-slider--label":"")+(t.labelAlways===!0?" q-slider--label-always":"")+(c.value===!0?" q-slider--dark":"")+(t.dense===!0?" q-slider--dense q-slider--dense"+g.value:""));function Q(v){const M="q-slider__"+v;return`${M} ${M}${g.value} ${M}${g.value}${k.value}`}function K(v){const M="q-slider__"+v;return`${M} ${M}${g.value}`}const ae=s(()=>{const v=t.selectionColor||t.color;return"q-slider__selection absolute"+(v!==void 0?` text-${v}`:"")}),oe=s(()=>K("markers")+" absolute overflow-hidden"),se=s(()=>K("track-container")),Z=s(()=>Q("pin")),ee=s(()=>Q("label")),T=s(()=>Q("text-container")),Y=s(()=>Q("marker-labels-container")+(t.markerLabelsClass!==void 0?` ${t.markerLabelsClass}`:"")),j=s(()=>"q-slider__track relative-position no-outline"+(t.trackColor!==void 0?` bg-${t.trackColor}`:"")),te=s(()=>{const v={[p.value]:t.trackSize};return t.trackImg!==void 0&&(v.backgroundImage=`url(${t.trackImg}) !important`),v}),w=s(()=>"q-slider__inner absolute"+(t.innerTrackColor!==void 0?` bg-${t.innerTrackColor}`:"")),ye=s(()=>{const v=A.value-J.value,M={[H.value]:`${100*J.value}%`,[$.value]:v===0?"2px":`${100*v}%`};return t.innerTrackImg!==void 0&&(M.backgroundImage=`url(${t.innerTrackImg}) !important`),M});function _e(v){const{min:M,max:R,step:F}=t;let ne=M+v*(R-M);if(F>0){const ge=(ne-P.value)%F;ne+=(Math.abs(ge)>=F/2?(ge<0?-1:1)*F:0)-ge}return ne=b.value(ne),Ce(ne,P.value,V.value)}function Te(v){return I.value===0?0:(v-t.min)/I.value}function At(v,M){const R=xe(v),F=t.vertical===!0?Ce((R.top-M.top)/M.height,0,1):Ce((R.left-M.left)/M.width,0,1);return Ce(x.value===!0?1-F:F,J.value,A.value)}const tt=s(()=>kt(t.markers)===!0?t.markers:C.value),nt=s(()=>{const v=[],M=tt.value,R=t.max;let F=t.min;do v.push(F),F+=M;while(F<R);return v.push(R),v}),at=s(()=>{const v=` ${ut}${g.value}-`;return ut+`${v}${t.switchMarkerLabelsSide===!0?"switched":"standard"}${v}${x.value===!0?"rtl":"ltr"}`}),Ve=s(()=>t.markerLabels===!1?null:It(t.markerLabels).map((v,M)=>({index:M,value:v.value,label:v.label||v.value,classes:at.value+(v.classes!==void 0?" "+v.classes:""),style:{...it(v.value),...v.style||{}}}))),ot=s(()=>({markerList:Ve.value,markerMap:Rt.value,classes:at.value,getStyle:it})),Dt=s(()=>{const v=W.value===0?"2px":100*tt.value/W.value;return{...ye.value,backgroundSize:t.vertical===!0?`2px ${v}%`:`${v}% 2px`}});function It(v){if(v===!1)return null;if(v===!0)return nt.value.map(Zn);if(typeof v=="function")return nt.value.map(R=>{const F=v(R);return Re(F)===!0?{...F,value:R}:{value:R,label:F}});const M=({value:R})=>R>=t.min&&R<=t.max;return Array.isArray(v)===!0?v.map(R=>Re(R)===!0?R:{value:R}).filter(M):Object.keys(v).map(R=>{const F=v[R],ne=Number(R);return Re(F)===!0?{...F,value:ne}:{value:ne,label:F}}).filter(M)}function it(v){return{[H.value]:`${100*(v-t.min)/I.value}%`}}const Rt=s(()=>{if(t.markerLabels===!1)return null;const v={};return Ve.value.forEach(M=>{v[M.value]=M}),v});function Et(){if(l["marker-label-group"]!==void 0)return l["marker-label-group"](ot.value);const v=l["marker-label"]||ea;return Ve.value.map(M=>v({marker:M,...ot.value}))}const zt=s(()=>[[Jn,Ft,void 0,{[h.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function Ft(v){v.isFinal===!0?(_.value!==void 0&&(n(v.evt),v.touch===!0&&e(!0),_.value=void 0,a("pan","end")),d.value=!1,f.value=!1):v.isFirst===!0?(_.value=o(v.evt),n(v.evt),e(),d.value=!0,a("pan","start")):(n(v.evt),e())}function lt(){f.value=!1}function Ot(v){n(v,o(v)),e(),m.value=!0,d.value=!0,document.addEventListener("mouseup",Ae,!0)}function Ae(){m.value=!1,d.value=!1,e(!0),lt(),document.removeEventListener("mouseup",Ae,!0)}function jt(v){n(v,o(v)),e(!0)}function Ht(v){Tt.includes(v.keyCode)&&e(!0)}function Qt(v){if(t.vertical===!0)return null;const M=r.lang.rtl!==t.reverse?1-v:v;return{transform:`translateX(calc(${2*M-1} * ${t.thumbSize} / 2 + ${50-100*M}%))`}}function Kt(v){const M=s(()=>m.value===!1&&(f.value===v.focusValue||f.value==="both")?" q-slider--focus":""),R=s(()=>`q-slider__thumb q-slider__thumb${g.value} q-slider__thumb${g.value}-${x.value===!0?"rtl":"ltr"} absolute non-selectable`+M.value+(v.thumbColor.value!==void 0?` text-${v.thumbColor.value}`:"")),F=s(()=>({width:t.thumbSize,height:t.thumbSize,[H.value]:`${100*v.ratio.value}%`,zIndex:f.value===v.focusValue?2:void 0})),ne=s(()=>v.labelColor.value!==void 0?` text-${v.labelColor.value}`:""),ge=s(()=>Qt(v.ratio.value)),De=s(()=>"q-slider__text"+(v.labelTextColor.value!==void 0?` text-${v.labelTextColor.value}`:""));return()=>{const Ie=[y("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[y("path",{d:t.thumbPath})]),y("div",{class:"q-slider__focus-ring fit"})];return(t.label===!0||t.labelAlways===!0)&&(Ie.push(y("div",{class:Z.value+" absolute fit no-pointer-events"+ne.value},[y("div",{class:ee.value,style:{minWidth:t.thumbSize}},[y("div",{class:T.value,style:ge.value},[y("span",{class:De.value},v.label.value)])])])),t.name!==void 0&&t.disable!==!0&&u(Ie,"push")),y("div",{class:R.value,style:F.value,...v.getNodeData()},Ie)}}function Xt(v,M,R,F){const ne=[];t.innerTrackColor!=="transparent"&&ne.push(y("div",{key:"inner",class:w.value,style:ye.value})),t.selectionColor!=="transparent"&&ne.push(y("div",{key:"selection",class:ae.value,style:v.value})),t.markers!==!1&&ne.push(y("div",{key:"marker",class:oe.value,style:Dt.value})),F(ne);const ge=[Mt("div",{key:"trackC",class:se.value,tabindex:M.value,...R.value},[y("div",{class:j.value,style:te.value},ne)],"slide",S.value,()=>zt.value)];if(t.markerLabels!==!1){const De=t.switchMarkerLabelsSide===!0?"unshift":"push";ge[De](y("div",{key:"markerL",class:Y.value},Et()))}return ge}return Ct(()=>{document.removeEventListener("mouseup",Ae,!0)}),{state:{active:d,focus:f,preventFocus:m,dragging:_,editable:S,classes:z,tabindex:X,attributes:L,roundValueFn:b,keyStep:C,trackLen:I,innerMin:P,innerMinRatio:J,innerMax:V,innerMaxRatio:A,positionProp:H,sizeProp:$,isReversed:x},methods:{onActivate:Ot,onMobileClick:jt,onBlur:lt,onKeyup:Ht,getContent:Xt,getThumbRenderFn:Kt,convertRatioToModel:_e,convertModelToRatio:Te,getDraggingRatio:At}}}const oa=()=>({}),ia=re({name:"QSlider",props:{...ta,modelValue:{required:!0,default:null,validator:e=>typeof e=="number"||e===null},labelValue:[String,Number]},emits:na,setup(e,{emit:n}){const{proxy:{$q:o}}=be(),{state:i,methods:t}=aa({updateValue:g,updatePosition:x,getDragging:k,formAttrs:mn(e)}),a=O(null),l=O(0),r=O(0);function c(){r.value=e.modelValue===null?i.innerMin.value:Ce(e.modelValue,i.innerMin.value,i.innerMax.value)}de(()=>`${e.modelValue}|${i.innerMin.value}|${i.innerMax.value}`,c),c();const u=s(()=>t.convertModelToRatio(r.value)),d=s(()=>i.active.value===!0?l.value:u.value),m=s(()=>{const S={[i.positionProp.value]:`${100*i.innerMinRatio.value}%`,[i.sizeProp.value]:`${100*(d.value-i.innerMinRatio.value)}%`};return e.selectionImg!==void 0&&(S.backgroundImage=`url(${e.selectionImg}) !important`),S}),f=t.getThumbRenderFn({focusValue:!0,getNodeData:oa,ratio:d,label:s(()=>e.labelValue!==void 0?e.labelValue:r.value),thumbColor:s(()=>e.thumbColor||e.color),labelColor:s(()=>e.labelColor),labelTextColor:s(()=>e.labelTextColor)}),_=s(()=>i.editable.value!==!0?{}:o.platform.is.mobile===!0?{onClick:t.onMobileClick}:{onMousedown:t.onActivate,onFocus:P,onBlur:t.onBlur,onKeydown:V,onKeyup:t.onKeyup});function g(S){r.value!==e.modelValue&&n("update:modelValue",r.value),S===!0&&n("change",r.value)}function k(){return a.value.getBoundingClientRect()}function x(S,b=i.dragging.value){const C=t.getDraggingRatio(S,b);r.value=t.convertRatioToModel(C),l.value=e.snap!==!0||e.step===0?C:t.convertModelToRatio(r.value)}function P(){i.focus.value=!0}function V(S){if(Tt.includes(S.keyCode)===!1)return;Be(S);const b=([34,33].includes(S.keyCode)?10:1)*i.keyStep.value,C=([34,37,40].includes(S.keyCode)?-1:1)*(i.isReversed.value===!0?-1:1)*(e.vertical===!0?-1:1)*b;r.value=Ce(i.roundValueFn.value(r.value+C),i.innerMin.value,i.innerMax.value),g()}return()=>{const S=t.getContent(m,i.tabindex,_,b=>{b.push(f())});return y("div",{ref:a,class:i.classes.value+(e.modelValue===null?" q-slider--no-value":""),...i.attributes.value,"aria-valuenow":e.modelValue},S)}}}),la={ratio:[String,Number]};function ra(e,n){return s(()=>{const o=Number(e.ratio||(n!==void 0?n.value:void 0));return isNaN(o)!==!0&&o>0?{paddingBottom:`${100/o}%`}:null})}const sa=1.7778,ua=re({name:"QImg",props:{...la,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:sa},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:n,emit:o}){const i=O(e.initialRatio),t=ra(e,i),a=be(),{registerTimeout:l,removeTimeout:r}=Fe(),{registerTimeout:c,removeTimeout:u}=Fe(),d=s(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),m=s(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),f=[O(null),O(d.value)],_=O(0),g=O(!1),k=O(!1),x=s(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),P=s(()=>({width:e.width,height:e.height})),V=s(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),S=s(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function b(){if(u(),e.loadingShowDelay===0){g.value=!0;return}c(()=>{g.value=!0},e.loadingShowDelay)}function C(){u(),g.value=!1}function X({target:$}){Ee(a)===!1&&(r(),i.value=$.naturalHeight===0?.5:$.naturalWidth/$.naturalHeight,I($,1))}function I($,p){p===1e3||Ee(a)===!0||($.complete===!0?W($):l(()=>{I($,p+1)},50))}function W($){Ee(a)!==!0&&(_.value=_.value^1,f[_.value].value=null,C(),$.getAttribute("__qerror")!=="true"&&(k.value=!1),o("load",$.currentSrc||$.src))}function J($){r(),C(),k.value=!0,f[_.value].value=m.value,f[_.value^1].value=d.value,o("error",$)}function A($){const p=f[$].value,h={key:"img_"+$,class:V.value,style:S.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...p};return _.value===$?Object.assign(h,{class:h.class+"current",onLoad:X,onError:J}):h.class+="loaded",y("div",{class:"q-img__container absolute-full",key:"img"+$},y("img",h))}function H(){return g.value===!1?y("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},fe(n[k.value===!0?"error":"default"])):y("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},n.loading!==void 0?n.loading():e.noSpinner===!0?void 0:[y(Bt,{color:e.spinnerColor,size:e.spinnerSize})])}{let $=function(){de(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,p=>{r(),k.value=!1,p===null?(C(),f[_.value^1].value=d.value):b(),f[_.value].value=p},{immediate:!0})};Yt.value===!0?Ke($):$()}return()=>{const $=[];return t.value!==null&&$.push(y("div",{key:"filler",style:t.value})),f[0].value!==null&&$.push(A(0)),f[1].value!==null&&$.push(A(1)),$.push(y(yt,{name:"q-transition--fade"},H)),y("div",{key:"main",class:x.value,style:P.value,role:"img","aria-label":e.alt},$)}}});function ct(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const n=parseInt(e,10);return isNaN(n)?0:n}const ca=Xe({name:"close-popup",beforeMount(e,{value:n}){const o={depth:ct(n),handler(i){o.depth!==0&&setTimeout(()=>{const t=fn(e);t!==void 0&&_n(t,i,o.depth)})},handlerKey(i){Gt(i,13)===!0&&o.handler(i)}};e.__qclosepopup=o,e.addEventListener("click",o.handler),e.addEventListener("keyup",o.handlerKey)},updated(e,{value:n,oldValue:o}){n!==o&&(e.__qclosepopup.depth=ct(n))},beforeUnmount(e){const n=e.__qclosepopup;e.removeEventListener("click",n.handler),e.removeEventListener("keyup",n.handlerKey),delete e.__qclosepopup}});function je(e,n){return n.split(".").reduce((o,i)=>o==null?void 0:o[i],e)}function da(e,n,o){const i=n.split(".");let t=e;for(let a=0;a<i.length-1;a++){const l=i[a];t[l]??(t[l]={}),t=t[l]}t[i[i.length-1]]=o}function Ue(){return He.reduce((e,n)=>(e[n]=0,e),{})}const He=["armor","attack","defense","damage.normal","damage.piercing","damage.bonus_v_large","damage.bonus_v_infantry","resistance.physical","resistance.magical","resistance.ward_save"],va=[{path:"health.unit",color:"green",label:"Health"},{path:"attack",color:"blue",label:"Attack"},{path:"damage.normal",color:"green",label:"Damage Normal"},{path:"damage.piercing",color:"green",label:"Damage Piercing"},{path:"damage.bonus_v_large",color:"green",label:"Damage Bonus V Large"},{path:"damage.bonus_v_infantry",color:"green",label:"Damage Bonus V Infantry"},{path:"defense",color:"red",label:"Defense"},{path:"armor",color:"orange",label:"Armor"},{path:"resistance.physical",color:"pink",label:"Resistance Physical"},{path:"resistance.fire",color:"pink",label:"Resistance Fire"},{path:"resistance.ward_save",color:"pink",label:"Resistance Ward Save"}];function dt(e){if(!e.selection.unit)return e;const n=JSON.parse(JSON.stringify(e.selection.unit));for(const o of Object.keys(e.bonus))if(typeof e.bonus[o]=="number"){const i=je(n,o);da(n,o,i+e.bonus[o])}return{selection:{unit:n,version:e.selection.version,faction:e.selection.faction},entityNumber:e.entityNumber}}const ma=40,fa=8,_a=90;function ga(e,n){var l,r,c,u;const o=e.attack||0,i=n.defense||0,a=((r=(l=n.land_unit)==null?void 0:l.battle_entity)==null?void 0:r.size)!=="small"?((c=e.damage)==null?void 0:c.bonus_v_large)||0:((u=e.damage)==null?void 0:u.bonus_v_infantry)||0;return Math.max(fa,Math.min(o-i+ma+a,_a))/100}function pa(e,n){var c,u,d,m,f,_;const i=((u=(c=n.land_unit)==null?void 0:c.battle_entity)==null?void 0:u.size)!=="small"?((d=e.damage)==null?void 0:d.bonus_v_large)||0:((m=e.damage)==null?void 0:m.bonus_v_infantry)||0,t=((f=e.damage)==null?void 0:f.normal)||0,a=((_=e.damage)==null?void 0:_.piercing)||0,l=t/(t+a),r=n.armor||0;return(t+i*l)*(1-Math.min(r*.75*.01,1))+a+i*(1-l)}function ha(e,n){var r,c,u,d,m;const o=((r=n.resistance)==null?void 0:r.ward_save)||0,i=((c=n.resistance)==null?void 0:c.physical)||0,t=((u=n.resistance)==null?void 0:u.fire)||0,a=((d=e.damage)==null?void 0:d.is_magical)||!1,l=((m=e.damage)==null?void 0:m.is_fire)||!1;return(o+(a?0:Math.max(i,0))+(l?Math.min(Math.max(t,-100),100):0))/100}function vt(e,n){var a;const o=ga(e,n),i=ha(e,n);return o*(1-i)*pa(e,n)/(((a=n.health)==null?void 0:a.unit)||0)}function Ne(e){return e.land_unit.num_engines>0&&e.land_unit.num_engines!==e.num_men||e.land_unit.num_mounts>0&&e.land_unit.num_mounts!==e.num_men?1:e.num_men||1}function ba(e,n){const o=vt(e.selection.unit,n.selection.unit)*Math.min(Ne(e.selection.unit),e.entityNumber),i=vt(n.selection.unit,e.selection.unit)*Math.min(Ne(n.selection.unit),n.entityNumber);function t(a,l,r){const c=1/l,d=1-c*r;return{winner:a,hitsNeeded:c,remainingHealth:d}}return o>i?t("left",o,i):i>o?t("right",i,o):t("left",o,i)}const Vt=St("unit",{state:()=>({leftUnit:null,rightUnit:null}),actions:{setLeftUnit(e){e?(this.leftUnit=e,this.leftUnit.bonus=Ue()):this.leftUnit=null},setRightUnit(e){e?(this.rightUnit=e,this.rightUnit.bonus=Ue()):this.rightUnit=null},setLeftUnitBonus(e){this.leftUnit&&(e?this.leftUnit.bonus=e:this.leftUnit.bonus=Ue())},setRightUnitBonus(e){this.rightUnit&&(e?this.rightUnit.bonus=e:this.rightUnit.bonus=Ue())},setLeftUnitEntityCount(e){this.leftUnit&&(this.leftUnit.entityNumber=e)},setRightUnitEntityCount(e){this.rightUnit&&(this.rightUnit.entityNumber=e)},clearUnits(){this.leftUnit=null,this.rightUnit=null}},getters:{combatResult(){var e,n;return!((e=this.leftUnit)!=null&&e.selection.unit)||!((n=this.rightUnit)!=null&&n.selection.unit)?null:ba(dt(this.leftUnit),dt(this.rightUnit))}},persist:{storage:Jt.localStorage()}}),ya={class:"short-summary"},ka={key:0,class:"combat-result"},Ca={class:"winner-section"},Sa={class:"hits-info"},wa={class:"health-display"},qa={key:1,class:"no-combat"},xa=me({__name:"ShortSummary",setup(e){const n=Vt(),o=s(()=>n.combatResult),i=s(()=>{var u,d,m;if(!o.value)return"";const c=o.value.winner==="left"?(u=n.leftUnit)==null?void 0:u.selection.unit:(d=n.rightUnit)==null?void 0:d.selection.unit;return((m=c==null?void 0:c.land_unit)==null?void 0:m.onscreen_name)||"Unknown Unit"}),t=s(()=>{var u,d,m;if(!o.value)return"";const c=o.value.winner==="left"?(u=n.rightUnit)==null?void 0:u.selection.unit:(d=n.leftUnit)==null?void 0:d.selection.unit;return((m=c==null?void 0:c.land_unit)==null?void 0:m.onscreen_name)||"Unknown Unit"}),a=s(()=>{var c;return((c=o.value)==null?void 0:c.winner)==="left"?"text-positive":"text-negative"}),l=s(()=>{var c;return((c=o.value)==null?void 0:c.winner)==="left"?"bg-negative":"bg-positive"}),r=s(()=>{var u;const c=(((u=o.value)==null?void 0:u.remainingHealth)||0)*100;return c>=80?"green":c>=60?"light-green":c>=40?"orange":c>=20?"deep-orange":"red"});return(c,u)=>{const d=Yn;return N(),D("div",ya,[o.value?(N(),D("div",ka,[q("div",Ca,[q("p",null,[q("span",{class:ve(["winner-title text-emphasized",a.value])},G(i.value),3),u[0]||(u[0]=$e(" wins! "))]),q("p",Sa,[$e(" Takes "+G(o.value.hitsNeeded.toFixed(1))+" hits to defeat ",1),q("span",{class:ve(["loser-name text-emphasized",l.value])},G(t.value),3),u[1]||(u[1]=$e(", with "))])]),q("div",wa,[U(d,{"show-value":"",value:o.value.remainingHealth*100,size:"70px",thickness:.22,color:r.value,"track-color":"grey-3",class:"q-ma-md"},{default:E(()=>[$e(G((o.value.remainingHealth*100).toFixed(1))+"% ",1)]),_:1},8,["value","color"]),u[2]||(u[2]=q("span",{class:"health-label"},"Remaining Health",-1))])])):(N(),D("div",qa,u[3]||(u[3]=[q("p",null,"Select two units to see combat results",-1)])))])}}}),$a=Se(xa,[["__scopeId","data-v-4ad7d52d"]]),Ua=me({__name:"ModifierDisplay",emits:["modify","reset"],setup(e,{emit:n}){const o=n;return(i,t)=>{const a=Un,l=ce;return N(),D("div",null,[U(l,{round:"",flat:"",dense:"",color:"red","aria-label":"Decrease value",title:"Decrease value",onClick:t[0]||(t[0]=r=>o("modify",-5))},{default:E(()=>[U(a,{name:"line-md:chevron-small-double-left"})]),_:1}),U(l,{round:"",flat:"",dense:"",color:"red","aria-label":"Decrease value",title:"Decrease value",onClick:t[1]||(t[1]=r=>o("modify",-1))},{default:E(()=>[U(a,{name:"line-md:chevron-small-left"})]),_:1}),U(l,{round:"",flat:"",dense:"","aria-label":"Reset value",title:"Reset value",onClick:t[2]||(t[2]=r=>o("reset"))},{default:E(()=>[U(a,{name:"ion:ios-minus-empty"})]),_:1}),U(l,{round:"",flat:"",dense:"",color:"green","aria-label":"Increase value",title:"Increase value",onClick:t[3]||(t[3]=r=>o("modify",1))},{default:E(()=>[U(a,{name:"line-md:chevron-small-right"})]),_:1}),U(l,{round:"",flat:"",dense:"",color:"green","aria-label":"Increase value",title:"Increase value",onClick:t[4]||(t[4]=r=>o("modify",5))},{default:E(()=>[U(a,{name:"line-md:chevron-small-double-right"})]),_:1})])}}}),Ba=me({__name:"ValueDisplay",props:{value:{type:[Number,Boolean]},isUpdatable:{type:Boolean},bonus:{default:0},orientation:{}},emits:["update"],setup(e,{emit:n}){const o=n;function i(r){l.value+=r,console.log("onModify",l.value),o("update",l.value)}function t(){l.value=0,console.log("onReset",l.value),o("update",l.value)}const l=O(e.bonus);return(r,c)=>(N(),D("div",{class:ve(["container",{reverse:r.orientation==="right"}])},[q("div",{class:ve(["left base",{right:r.orientation==="right"}])},G(r.value),3),q("div",{class:ve(["left bonus",{right:r.orientation==="right"}])},G(l.value),3),r.isUpdatable?(N(),le(Ua,{key:0,onModify:i,onReset:t})):ie("",!0)],2))}}),mt=Se(Ba,[["__scopeId","data-v-26584345"]]),Na={scope:"col",class:"text-right unit-column"},Ma={scope:"col",class:"text-left unit-column"},Pa={key:0,class:"unit-column"},La={class:"text-center stat-column"},Ta={key:1,class:"unit-column"},Va=me({__name:"index",props:{leftUnit:{},rightUnit:{}},emits:["update"],setup(e,{emit:n}){const o=n;function i(t,a,l){o("update",t,a,l)}return(t,a)=>{const l=$n;return N(),le(l,{separator:"none",flat:"",bordered:""},{default:E(()=>{var r,c,u,d,m,f,_,g;return[q("thead",null,[q("tr",null,[q("th",Na,[q("b",null,G((d=(u=(c=(r=t.leftUnit)==null?void 0:r.selection)==null?void 0:c.unit)==null?void 0:u.land_unit)==null?void 0:d.onscreen_name),1)]),a[0]||(a[0]=q("th",{scope:"col",class:"text-center stat-column"},[q("b",null,"Statistic")],-1)),q("th",Ma,[q("b",null,G((g=(_=(f=(m=t.rightUnit)==null?void 0:m.selection)==null?void 0:f.unit)==null?void 0:_.land_unit)==null?void 0:g.onscreen_name),1)])])]),q("tbody",null,[(N(!0),D(he,null,ke(B(va),k=>{var x,P,V,S;return N(),D("tr",{key:k.path},[(P=(x=t.leftUnit)==null?void 0:x.selection)!=null&&P.unit?(N(),D("td",Pa,[U(mt,{value:B(je)(t.leftUnit.selection.unit,k.path),bonus:t.leftUnit.bonus[k.path],isUpdatable:B(He).includes(k.path),onUpdate:b=>i("left",k.path,b),orientation:"left"},null,8,["value","bonus","isUpdatable","onUpdate"])])):ie("",!0),q("td",La,G(k.label),1),(S=(V=t.rightUnit)==null?void 0:V.selection)!=null&&S.unit?(N(),D("td",Ta,[U(mt,{value:B(je)(t.rightUnit.selection.unit,k.path),bonus:t.rightUnit.bonus[k.path],isUpdatable:B(He).includes(k.path),onUpdate:b=>i("right",k.path,b),orientation:"right"},null,8,["value","bonus","isUpdatable","onUpdate"])])):ie("",!0)])}),128))])]}),_:1})}}}),Aa=Se(Va,[["__scopeId","data-v-40060033"]]),et="https://res.cloudinary.com/fishofstone/image/upload/twwstats/api",Da="ui/skins/default/icon_cross.webp",Ia="mon_64.webp";function Qe(e,n){let o=`${et}/${e}`;if(n.general_portrait&&n.general_portrait.length>0){const i=n.general_portrait.replace("portholes","units").replace(".png",".webp");o+=`/${i}`}else n.unit_card_url?o+=`/ui/units/icons/${n.unit_card_url}.webp`:n.unit&&(o+=`/ui/units/icons/${n.unit}.webp`);return o}async function Ra(e,n,o){var i,t,a,l,r,c,u,d,m,f,_,g,k,x,P,V,S,b,C,X,I,W,J,A,H,$,p,h,L,z,Q,K,ae,oe,se,Z,ee,T,Y,j;if(!n||!o)throw new Error("ID de version et clé d'unité requis");try{const te=await e.query({tww:{__args:{tww_version:n},unit:{__args:{id:o},unit:!0,caste:!0,num_men:!0,recruitment_cost:!0,upkeep_cost:!0,land_unit:{onscreen_name:!0,bonus_hit_points:!0,num_engines:!0,num_mounts:!0,battle_entity:{hit_points:!0,size:!0,type:!0},articulated_vehicle_entity:{hit_points:!0},engine:{battle_entity:{hit_points:!0,type:!0}},mount:{battle_entity:{hit_points:!0}},armour:{armour_value:!0},primary_melee_weapon:{damage:!0,ap_damage:!0,bonus_v_large:!0,bonus_v_infantry:!0,melee_attack_interval:!0,is_magical:!0,ignition_amount:!0},melee_attack:!0,melee_defence:!0,damage_mod_physical:!0,damage_mod_flame:!0,damage_mod_all:!0,variant:{unit_card_url:!0}},battle_mounts:{base_unit:!0,mounted_unit:!0,icon_name:!0,mount_name:!0},custom_battle_permissions:{general_portrait:!0},ui_unit_group:{parent_group:{onscreen_name:!0}}}}});if(!((i=te==null?void 0:te.tww)!=null&&i.unit))return null;const w=te.tww.unit;return!w||typeof w.unit!="string"||typeof w.caste!="string"||typeof w.num_men!="number"||!w.land_unit?null:{version:n,unit:w.unit,caste:w.caste,num_men:w.num_men,recruitment_cost:Number(w.recruitment_cost||0),upkeep_cost:Number(w.upkeep_cost||0),land_unit:{num_engines:w.land_unit.num_engines||0,num_mounts:w.land_unit.num_mounts||0,onscreen_name:((t=w.land_unit)==null?void 0:t.onscreen_name)||"",bonus_hit_points:Number(((a=w.land_unit)==null?void 0:a.bonus_hit_points)||0),battle_entity:{hit_points:Number(((r=(l=w.land_unit)==null?void 0:l.battle_entity)==null?void 0:r.hit_points)||0),size:((u=(c=w.land_unit)==null?void 0:c.battle_entity)==null?void 0:u.size)||"small",type:((m=(d=w.land_unit)==null?void 0:d.battle_entity)==null?void 0:m.type)||""}},battle_mounts:(w.battle_mounts||[]).filter(_e=>_e!==null).map(_e=>({base_unit:_e.base_unit||"",mounted_unit:_e.mounted_unit||"",icon_name:_e.icon_name||"",mount_name:_e.mount_name||""})),health:{unit:gn(w),entity:Math.round(((_=(f=w.land_unit)==null?void 0:f.battle_entity)==null?void 0:_.hit_points)||0)},armor:Number(((k=(g=w.land_unit)==null?void 0:g.armour)==null?void 0:k.armour_value)||0),attack:Number(((x=w.land_unit)==null?void 0:x.melee_attack)||0),defense:Number(((P=w.land_unit)==null?void 0:P.melee_defence)||0),attack_interval:Number(((S=(V=w.land_unit)==null?void 0:V.primary_melee_weapon)==null?void 0:S.melee_attack_interval)||0),damage:{normal:Number(((C=(b=w.land_unit)==null?void 0:b.primary_melee_weapon)==null?void 0:C.damage)||0),piercing:Number(((I=(X=w.land_unit)==null?void 0:X.primary_melee_weapon)==null?void 0:I.ap_damage)||0),is_magical:!!((J=(W=w.land_unit)==null?void 0:W.primary_melee_weapon)!=null&&J.is_magical),is_fire:Number(((H=(A=w.land_unit)==null?void 0:A.primary_melee_weapon)==null?void 0:H.ignition_amount)||0)>0,bonus_v_large:Number(((p=($=w.land_unit)==null?void 0:$.primary_melee_weapon)==null?void 0:p.bonus_v_large)||0),bonus_v_infantry:Number(((L=(h=w.land_unit)==null?void 0:h.primary_melee_weapon)==null?void 0:L.bonus_v_infantry)||0)},resistance:{physical:Number(((z=w.land_unit)==null?void 0:z.damage_mod_physical)||0),fire:Number(((Q=w.land_unit)==null?void 0:Q.damage_mod_flame)||0),ward_save:Number(((K=w.land_unit)==null?void 0:K.damage_mod_all)||0)},is_large:((oe=(ae=w.land_unit)==null?void 0:ae.battle_entity)==null?void 0:oe.size)!=="small",general_portrait:((Z=(se=w.custom_battle_permissions)==null?void 0:se[0])==null?void 0:Z.general_portrait)||"",group:((T=(ee=w.ui_unit_group)==null?void 0:ee.parent_group)==null?void 0:T.onscreen_name)||"",unit_card_url:((j=(Y=w.land_unit)==null?void 0:Y.variant)==null?void 0:j.unit_card_url)||""}}catch(te){throw console.error("Erreur lors de la récupération de l'unité:",te),te}}function ft(e,n){if(!(!e||!(n!=null&&n.flags_url)))return`${et}/${e}/${n.flags_url}/${Ia}`}const Ea=St("memory",{state:()=>({last_version:null}),actions:{setLastVersion(e){this.last_version=e},clearSession(){this.last_version=null}},persist:{storage:sessionStorage,key:"tww3-brawl-memory"}}),za={class:"row items-center q-gutter-x-sm"},Fa={class:"q-mb-md"},Oa={key:0,class:"version-icons-row"},ja=["onClick"],Ha={class:"version-icon"},Qa={class:"version-label"},Ka={class:"q-mb-md"},Xa={key:0,class:"faction-icons-row"},Wa=["onClick"],Ya=["src","alt"],Ga={class:"faction-label"},Ja={class:"q-mb-md"},Za={key:0},eo={class:"group-label"},to={class:"unit-icons-row"},no=["onClick"],ao=["src","alt"],oo={class:"unit-label"},io={key:1},lo=me({__name:"SelectUnit",props:{unitSelection:{},version:{}},emits:["update:unitSelection","update:version"],setup(e,{emit:n}){const o=O(null),i=O("version"),t=O(!1),a=Ea(),l=n,r=O(null),c=s({get:()=>{var p;return(p=r.value)!=null&&p.version?r.value.version:a.last_version},set:p=>{a.setLastVersion(p),r.value?r.value.version=p:p&&(r.value={unit:void 0,version:p,faction:void 0})}}),u=s({get:()=>{var p;return((p=r.value)==null?void 0:p.faction)||null},set:p=>{r.value?r.value.faction=p:p&&(r.value={unit:void 0,version:void 0,faction:p})}}),d=s({get:()=>{var p;return((p=r.value)==null?void 0:p.unit)||null},set:p=>{r.value?r.value.unit=p:p&&(r.value={unit:p,version:void 0,faction:void 0})}}),{data:m,isLoading:f}=pn(),_=s(()=>m.value?m.value:[]),g=s(()=>{var p,h;return((h=(p=r.value)==null?void 0:p.version)==null?void 0:h.id)??""}),{data:k,isLoading:x,refetch:P}=hn(g),V=s(()=>k.value?k.value:[]),S=s(()=>{var p,h;return((h=(p=r.value)==null?void 0:p.faction)==null?void 0:h.key)??""}),{data:b,isLoading:C,refetch:X}=bn(g,S);s(()=>b.value?b.value.map(p=>{var h;return{label:((h=p.land_unit)==null?void 0:h.onscreen_name)||p.unit,value:p.unit}}):[]);const I=s(()=>{var Q;if(!b.value)return{};const p={};for(const K of b.value){const ae=K.group||"Autres";p[ae]||(p[ae]=[]),p[ae].push(K)}const h={};for(const[K,ae]of Object.entries(p)){const oe={};for(const Z of ae){const ee=((Q=Z.land_unit)==null?void 0:Q.onscreen_name)||Z.unit;oe[ee]||(oe[ee]=[]),oe[ee].push(Z)}const se=[];for(const Z in oe){const ee=oe[Z].sort((T,Y)=>{const j=T.recruitment_cost||0,te=Y.recruitment_cost||0;return j-te})[0];se.push(ee)}se.sort((Z,ee)=>{var w,ye;const T=Z.recruitment_cost||0,Y=ee.recruitment_cost||0;if(T!==Y)return T-Y;const j=((w=Z.land_unit)==null?void 0:w.onscreen_name)||Z.unit,te=((ye=ee.land_unit)==null?void 0:ye.onscreen_name)||ee.unit;return j.localeCompare(te)}),h[K]=se}const L=["Lords","Heroes","Infantry","Missile Infantry","Cavalry & Chariots","Missile Cavalry & Chariots","Artillery & War Machines"],z={};for(const K of L)h[K]&&(z[K]=h[K]);for(const[K,ae]of Object.entries(h))L.includes(K)||(z[K]=ae);return z});de(t,async p=>{p&&(!r.value||!r.value.unit)&&a.last_version&&(c.value=a.last_version,i.value="faction",await P())}),de(i,async p=>{p==="version"?r.value&&(r.value.faction=void 0,r.value.unit=void 0):p==="faction"?(await P(),r.value&&(r.value.unit=void 0)):p==="unit"&&await X()});const W=()=>{i.value==="version"&&c.value?(u.value=void 0,d.value=void 0,i.value="faction"):i.value==="faction"&&u.value&&(d.value=void 0,i.value="unit")},J=()=>{i.value==="unit"?(d.value=void 0,i.value="faction"):i.value==="faction"&&(u.value=void 0,i.value="version")},A=p=>{c.value=p,i.value="faction"},H=p=>{u.value=p,i.value="unit"},$=p=>{d.value=p,r.value&&(t.value=!1,l("update:unitSelection",r.value))};return(p,h)=>{const L=ce,z=kn,Q=Kn,K=Bt,ae=Qn,oe=Je,se=Tn,Z=Ge,ee=yn;return N(),D("div",za,[U(L,{label:"Pick a Unit",color:"primary",onClick:h[0]||(h[0]=T=>t.value=!0)}),U(ee,{modelValue:t.value,"onUpdate:modelValue":h[6]||(h[6]=T=>t.value=T)},{default:E(()=>[U(Z,{class:"custom"},{default:E(()=>[U(oe,{class:"q-card-section-custom"},{default:E(()=>[U(ae,{ref_key:"carouselRef",ref:o,padding:!1,modelValue:i.value,"onUpdate:modelValue":h[3]||(h[3]=T=>i.value=T),autoplay:!1,"transition-prev":"slide-left","transition-next":"slide-right","aria-hidden":"true",class:"q-carousel-custom"},{default:E(()=>[U(Q,{name:"version",key:"version"},{default:E(()=>[q("div",Fa,[U(z,{modelValue:c.value,"onUpdate:modelValue":h[1]||(h[1]=T=>c.value=T),options:_.value,loading:B(f),label:"Versions",dense:"",outlined:"","option-label":"name","option-value":"id"},null,8,["modelValue","options","loading"]),B(m)&&i.value==="version"?(N(),D("div",Oa,[(N(!0),D(he,null,ke(B(m),T=>{var Y;return N(),D("div",{key:T.id,class:ve(["version-icon-container",{selected:c.value&&c.value.id===T.id}]),onClick:j=>A(T)},[q("div",Ha,G(((Y=T.name)==null?void 0:Y.charAt(0))||"V"),1),q("div",Qa,G(T.name),1)],10,ja)}),128))])):ie("",!0)])]),_:1}),U(Q,{name:"faction",key:"faction"},{default:E(()=>[q("div",Ka,[U(z,{modelValue:u.value,"onUpdate:modelValue":h[2]||(h[2]=T=>u.value=T),options:V.value,loading:B(x),disable:!c.value||B(x),label:"Faction",dense:"",outlined:"","option-label":"screen_name","option-value":"key"},null,8,["modelValue","options","loading","disable"]),B(k)&&i.value==="faction"?(N(),D("div",Xa,[(N(!0),D(he,null,ke(B(k),T=>{var Y;return N(),D("div",{key:T.key,class:ve(["faction-icon-container",{selected:u.value&&u.value.key===T.key}]),onClick:j=>H(T)},[B(ft)(g.value,T)?(N(),D("img",{key:0,src:B(ft)(g.value,T),alt:T.screen_name||T.key,class:"faction-icon"},null,8,Ya)):ie("",!0),q("div",Ga,G(((Y=T.subculture)==null?void 0:Y.name)||T.key),1)],10,Wa)}),128))])):ie("",!0)])]),_:1}),U(Q,{name:"unit",key:"unit"},{default:E(()=>[q("div",Ja,[B(b)&&Object.keys(I.value).length>0?(N(),D("div",Za,[(N(!0),D(he,null,ke(I.value,(T,Y)=>(N(),D("div",{key:Y,class:"unit-group-block"},[q("div",eo,G(Y),1),q("div",to,[(N(!0),D(he,null,ke(T,j=>{var te,w;return N(),D("div",{key:j.unit,class:ve(["unit-icon-container",{selected:d.value&&d.value.unit===j.unit}]),onClick:ye=>$(j)},[B(Qe)(g.value,j)?(N(),D("img",{key:0,src:B(Qe)(g.value,j),alt:((te=j.land_unit)==null?void 0:te.onscreen_name)||j.unit,class:"unit-icon"},null,8,ao)):ie("",!0),q("div",oo,G(((w=j.land_unit)==null?void 0:w.onscreen_name)||j.unit),1)],10,no)}),128))])]))),128))])):(N(),D("div",io,[U(K,{color:"primary"})]))])]),_:1})]),_:1},8,["modelValue"])]),_:1}),U(se,{class:"text-primary q-card-actions-custom",align:"between"},{default:E(()=>[i.value==="version"?(N(),le(L,{key:0,label:"Fermer",flat:"",dense:"",onClick:h[4]||(h[4]=T=>t.value=!1)})):(N(),le(L,{key:1,label:"Back",flat:"",dense:"",onClick:J})),i.value!=="unit"?(N(),le(L,{key:2,disable:i.value==="version"&&!c.value||i.value==="faction"&&!u.value,label:"Next",color:"primary",flat:"",dense:"",onClick:W},null,8,["disable"])):(N(),le(L,{key:3,disable:!d.value||!c.value||!u.value,label:"Finish",color:"primary",flat:"",dense:"",onClick:h[5]||(h[5]=()=>{t.value=!1,r.value&&l("update:unitSelection",r.value)})},null,8,["disable"]))]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),ro=Se(lo,[["__scopeId","data-v-121c956b"]]);function _t(e,n){return`${et}/${e}/${n.replace(/\.png/,".webp")}`}function so(e,n,o){const i=Cn();return Sn({queryKey:["tww","versions",e,"units",n],queryFn:()=>Ra(i,e.value,n.value),staleTime:30*60*1e3,enabled:!!e.value&&!!n.value})}const uo={class:"row items-center"},co=["src"],vo=["src"],mo=me({__name:"MountPicker",props:{unit:{}},emits:["update:unit"],setup(e,{emit:n}){const o=e,i=n,t=s(()=>{var g;return(g=l.value.find(k=>k.mounted_unit===o.unit.unit))==null?void 0:g.icon_name}),a=O(null),l=s(()=>{const g=o.unit.battle_mounts;if(g.length>0){const k={base_unit:g[0].base_unit,mounted_unit:g[0].base_unit,icon_name:Da,mount_name:"On Foot"};return[...g,k]}return[]}),r=s(()=>o.unit.version),c=s(()=>a.value||""),{data:u,isLoading:d,error:m,refetch:f}=so(r,c);de(a,async g=>{g!==null&&(await f(),u.value&&i("update:unit",u.value))},{immediate:!0});function _(g){const k=g.mounted_unit;k!==o.unit.unit&&(a.value=k)}return(g,k)=>{const x=Bn,P=qn,V=wn,S=Ln,b=ca;return N(),D("div",uo,[U(S,null,{default:E(()=>[U(V,null,{default:E(()=>[(N(!0),D(he,null,ke(l.value,C=>Zt((N(),le(P,{key:C.mounted_unit,onClick:X=>_(C),clickable:""},{default:E(()=>[U(x,null,{default:E(()=>[q("img",{src:B(_t)(g.unit.version,C.icon_name)},null,8,co)]),_:2},1024),$e(" "+G(C.mount_name),1)]),_:2},1032,["onClick"])),[[b]])),128))]),_:1})]),_:1}),U(x,null,{default:E(()=>[q("img",{src:B(_t)(g.unit.version,t.value||"")},null,8,vo)]),_:1})])}}}),fo={class:"unit-label text-xl"},_o={class:"q-mt-md row justify-between"},go=me({__name:"index",props:{orientation:{default:"left"},modelValue:{}},emits:["update:modelValue"],setup(e,{emit:n}){const o=s(()=>{var d;return((d=t.modelValue)==null?void 0:d.selection)||null}),i=O(null),t=e,a=n;function l(d){const m=d.num_men||1,f=Math.min(15,m);t.modelValue&&(t.modelValue.selection.unit=d,a("update:modelValue",{selection:t.modelValue.selection,entityNumber:f,bonus:t.modelValue.bonus}))}function r(d){var _;const m=((_=d.unit)==null?void 0:_.num_men)||1,f=Math.min(15,m);a("update:modelValue",{selection:d,entityNumber:f,bonus:Ue()})}const c=s(()=>{var d,m,f;return(f=(m=(d=o.value)==null?void 0:d.unit)==null?void 0:m.land_unit)!=null&&f.onscreen_name?o.value.unit.land_unit.onscreen_name:"Unit Title"}),u=s(()=>{var d,m,f;if((d=o.value)!=null&&d.unit&&((f=(m=o.value)==null?void 0:m.version)!=null&&f.id)){const _=Qe(o.value.version.id,o.value.unit);if(_)return _}return"/default-unit-image.jpg"});return(d,m)=>{const f=ua,_=Je,g=Ge;return N(),le(g,{class:"unit-card"},{default:E(()=>[U(_,null,{default:E(()=>[U(f,{src:u.value,ratio:16/9,fit:"contain",class:"unit-image",alt:"Unit Portrait"},null,8,["src"]),q("div",fo,G(c.value),1)]),_:1}),U(_,{class:ve([d.orientation,"card-section"])},{default:E(()=>{var k,x,P,V,S,b;return[q("div",_o,[U(ro,{unitSelection:o.value,version:B(i),"onUpdate:unitSelection":m[0]||(m[0]=C=>r(C)),"onUpdate:version":m[1]||(m[1]=C=>i.value=C)},null,8,["unitSelection","version"]),(P=(x=(k=o.value)==null?void 0:k.unit)==null?void 0:x.battle_mounts)!=null&&P.length&&((b=(S=(V=o.value)==null?void 0:V.unit)==null?void 0:S.battle_mounts)==null?void 0:b.length)>0?(N(),le(mo,{key:0,unit:o.value.unit,"onUpdate:unit":m[2]||(m[2]=C=>l(C))},null,8,["unit"])):ie("",!0)])]}),_:1},8,["class"])]),_:1})}}}),gt=Se(go,[["__scopeId","data-v-b6c08d2e"]]),po={key:0,class:"col-6"},ho={class:"text-caption q-mb-xs"},bo={class:"q-mt-md"},yo={class:"row q-gutter-xs"},ko=me({__name:"EntitySliders",props:{entityNumber:{},maxEntities:{}},emits:["update:entityNumber"],setup(e,{emit:n}){const o=n,i=[6,10,14,20],t=a=>{a!==null&&o("update:entityNumber",a)};return(a,l)=>{const r=ia,c=ce,u=Je,d=Ge;return a.maxEntities>1?(N(),D("div",po,[U(d,null,{default:E(()=>[U(u,null,{default:E(()=>[q("div",ho," Active entities: "+G(a.entityNumber),1),U(r,{"model-value":a.entityNumber,"onUpdate:modelValue":t,min:1,max:a.maxEntities,step:1,label:"","label-always":""},null,8,["model-value","max"]),q("div",bo,[l[0]||(l[0]=q("div",{class:"text-caption q-mb-xs"},"Quick select:",-1)),q("div",yo,[(N(),D(he,null,ke(i,m=>U(c,{key:m,label:m.toString(),color:a.entityNumber===m?"primary":"grey-6",outline:a.entityNumber!==m,size:"sm",onClick:f=>t(m),disable:m>a.maxEntities},null,8,["label","color","outline","onClick","disable"])),64))])])]),_:1})]),_:1})])):ie("",!0)}}}),pt=Se(ko,[["__scopeId","data-v-95171e5f"]]),Co={class:"q-pa-md container"},So={class:"justify-center items-center unit-cards-container"},wo={class:"text-center"},qo={key:0,class:"entity-sliders-container"},xo={class:"entity-slider"},$o={class:"entity-slider"},Uo=me({__name:"index",setup(e){const n=Vt(),o=(t,a,l)=>{var r,c;if(t==="left"){const u=((r=n.leftUnit)==null?void 0:r.bonus)??null;u&&(u[a]=l),n.setLeftUnitBonus(u)}else{const u=((c=n.rightUnit)==null?void 0:c.bonus)??null;u&&(u[a]=l),n.setRightUnitBonus(u)}},i=()=>{n.clearUnits()};return(t,a)=>{var u,d,m,f,_,g,k,x,P,V,S,b,C,X;const l=ce,r=$a,c=Aa;return N(),D(he,null,[a[4]||(a[4]=q("h1",null,"TWW3 Brawl",-1)),q("div",Co,[q("div",So,[U(gt,{orientation:"left",class:"bg-positive unit-card",modelValue:B(n).leftUnit,"onUpdate:modelValue":a[0]||(a[0]=I=>B(n).setLeftUnit(I))},null,8,["modelValue"]),U(gt,{orientation:"right",class:"bg-negative unit-card",modelValue:B(n).rightUnit,"onUpdate:modelValue":a[1]||(a[1]=I=>B(n).setRightUnit(I))},null,8,["modelValue"])]),q("div",wo,[U(l,{label:"Reset",color:"warning",icon:"refresh",onClick:i})]),(m=(d=(u=B(n))==null?void 0:u.leftUnit)==null?void 0:d.selection)!=null&&m.unit||(g=(_=(f=B(n))==null?void 0:f.rightUnit)==null?void 0:_.selection)!=null&&g.unit?(N(),D("div",qo,[q("div",xo,[(P=(x=(k=B(n))==null?void 0:k.leftUnit)==null?void 0:x.selection)!=null&&P.unit&&B(Ne)(B(n).leftUnit.selection.unit)>1?(N(),le(pt,{key:0,"entity-number":B(n).leftUnit.entityNumber,"max-entities":((S=(V=B(n).leftUnit.selection)==null?void 0:V.unit)==null?void 0:S.num_men)||1,"onUpdate:entityNumber":a[2]||(a[2]=I=>B(n).setLeftUnitEntityCount(I))},null,8,["entity-number","max-entities"])):ie("",!0)]),q("div",$o,[(X=(C=(b=B(n))==null?void 0:b.rightUnit)==null?void 0:C.selection)!=null&&X.unit&&B(Ne)(B(n).rightUnit.selection.unit)>1?(N(),le(pt,{key:0,"entity-number":B(n).rightUnit.entityNumber,"max-entities":B(Ne)(B(n).rightUnit.selection.unit),"onUpdate:entityNumber":a[3]||(a[3]=I=>B(n).setRightUnitEntityCount(I))},null,8,["entity-number","max-entities"])):ie("",!0)])])):ie("",!0),U(r),U(c,{leftUnit:B(n).leftUnit,rightUnit:B(n).rightUnit,onUpdate:o},null,8,["leftUnit","rightUnit"])])],64)}}}),Lo=Se(Uo,[["__scopeId","data-v-f9e955ae"]]);export{Lo as default};
