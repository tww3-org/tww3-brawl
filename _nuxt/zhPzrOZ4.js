import{H as de,j as f,h as N,I as ye,r as G,J as oe,o as Ie,K as Be,L as tt,M as Ne,N as he,O as Ue,P as Bt,Q as xe,R as Ee,S as Pe,T as Nt,U as Ut,V as cn,W as Vt,e as nt,X as mt,Y as We,Z as dn,$ as Me,a0 as vn,a1 as fn,a2 as mn,d as fe,t as K,v as R,z as F,A as X,_ as _e,a3 as ue,a4 as L,a5 as gn,a6 as le,B as Ce,y as se,a7 as Pt,a8 as _n,x as A,a9 as qe,aa as hn,ab as me,ac as be,ad as pn,ae as bn,u as yn}from"./CeG6wIVE.js";import{u as Rt,a as At,Q as Et,h as It,b as Tt,c as ke,d as kn,n as Ft,e as wn,g as Sn,f as Cn,_ as ge,i as at,j as ot,k as xn,l as qn,m as Lt,o as Ye,p as $n,q as Mn,r as Bn,s as Nn,t as Dt,v as $e,w as zt,x as Un,y as Vn,z as Ot,A as Xe,B as Pn,C as Rn,D as An,E as gt,F as En,G as In,H as Tn,I as Fn,J as Ln,K as Dn,L as zn,M as jt,N as On,O as jn,P as Hn,R as Kn,S as Ht,T as Qn,U as Wn,V as Xn,W as Gn,X as Yn}from"./C3tzosfo.js";import Zn from"./Mi8nLQ3H.js";/* empty css        */const Jn=de({name:"QAvatar",props:{...Rt,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(e,{slots:n}){const o=At(e),i=f(()=>"q-avatar"+(e.color?` bg-${e.color}`:"")+(e.textColor?` text-${e.textColor} q-chip--colored`:"")+(e.square===!0?" q-avatar--square":e.rounded===!0?" rounded-borders":"")),t=f(()=>e.fontSize?{fontSize:e.fontSize}:null);return()=>{const a=e.icon!==void 0?[N(Et,{name:e.icon})]:void 0;return N("div",{class:i.value,style:o.value},[N("div",{class:"q-avatar__content row flex-center overflow-hidden",style:t.value},It(n.default,a))])}}}),ea=["top","middle","bottom"],ta=de({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>ea.includes(e)}},setup(e,{slots:n}){const o=f(()=>e.align!==void 0?{verticalAlign:e.align}:null),i=f(()=>{const t=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(t!==void 0?` text-${t}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>N("div",{class:i.value,style:o.value,role:"status","aria-label":e.label},Tt(n.default,e.label!==void 0?[e.label]:[]))}}),na=de({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:n}){const o=f(()=>{const i=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(t=>e[t]===!0).map(t=>`q-btn-group--${t}`).join(" ");return`q-btn-group row no-wrap${i.length!==0?" "+i:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>N("div",{class:o.value},ke(n.default))}}),aa=Object.keys(Ft);function oa(e){return aa.reduce((n,o)=>{const i=e[o];return i!==void 0&&(n[o]=i),n},{})}const ia=de({name:"QBtnDropdown",props:{...Ft,...kn,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,noRefocus:Boolean,noFocus:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:n,emit:o}){const{proxy:i}=ye(),t=G(e.modelValue),a=G(null),r=wn(),u=f(()=>{const C={"aria-expanded":t.value===!0?"true":"false","aria-haspopup":"true","aria-controls":r.value,"aria-label":e.toggleAriaLabel||i.$q.lang.label[t.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(C["aria-disabled"]="true"),C}),h=f(()=>"q-btn-dropdown__arrow"+(t.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),l=f(()=>Sn(e)),s=f(()=>oa(e));oe(()=>e.modelValue,C=>{var M;(M=a.value)==null||M[C?"show":"hide"]()}),oe(()=>e.split,B);function v(C){t.value=!0,o("beforeShow",C)}function d(C){o("show",C),o("update:modelValue",!0)}function c(C){t.value=!1,o("beforeHide",C)}function g(C){o("hide",C),o("update:modelValue",!1)}function w(C){o("click",C)}function $(C){Be(C),B(),o("click",C)}function V(C){var M;(M=a.value)==null||M.toggle(C)}function x(C){var M;(M=a.value)==null||M.show(C)}function B(C){var M;(M=a.value)==null||M.hide(C)}return Object.assign(i,{show:x,hide:B,toggle:V}),Ie(()=>{e.modelValue===!0&&x()}),()=>{const C=[N(Et,{class:h.value,name:e.dropdownIcon||i.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&C.push(N(Cn,{ref:a,id:r.value,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noEscDismiss:e.noEscDismiss,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,noFocus:e.noFocus,noRefocus:e.noRefocus,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:v,onShow:d,onBeforeHide:c,onHide:g},n.default)),e.split===!1?N(ge,{class:"q-btn-dropdown q-btn-dropdown--simple",...s.value,...u.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:w},{default:()=>ke(n.label,[]).concat(C),loading:n.loading}):N(na,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...l.value,glossy:e.glossy,stretch:e.stretch},()=>[N(ge,{class:"q-btn-dropdown--current",...s.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:$},{default:n.label,loading:n.loading}),N(ge,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...u.value,...l.value,disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},()=>C)])}}}),it=de({name:"QCard",props:{...at,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:n}){const{proxy:{$q:o}}=ye(),i=ot(e,o),t=f(()=>"q-card"+(i.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>N(e.tag,{class:t.value},ke(n.default))}}),la=de({name:"QCardActions",props:{...xn,vertical:Boolean},setup(e,{slots:n}){const o=qn(e),i=f(()=>`q-card__actions ${o.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>N("div",{class:i.value},ke(n.default))}}),lt=de({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:n}){const o=f(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>N(e.tag,{class:o.value},ke(n.default))}}),rt={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},ra=Object.keys(rt);rt.all=!0;function Fe(e){const n={};for(const o of ra)e[o]===!0&&(n[o]=!0);return Object.keys(n).length===0?rt:(n.horizontal===!0?n.left=n.right=!0:n.left===!0&&n.right===!0&&(n.horizontal=!0),n.vertical===!0?n.up=n.down=!0:n.up===!0&&n.down===!0&&(n.vertical=!0),n.horizontal===!0&&n.vertical===!0&&(n.all=!0),n)}const sa=["INPUT","TEXTAREA"];function Le(e,n){return n.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof n.handler=="function"&&sa.includes(e.target.nodeName.toUpperCase())===!1&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(n.uid)===-1)}function ua(e){const n=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((o,i)=>{const t=parseFloat(o);t&&(n[i]=t)}),n}const ca=tt({name:"touch-swipe",beforeMount(e,{value:n,arg:o,modifiers:i}){if(i.mouse!==!0&&he.has.touch!==!0)return;const t=i.mouseCapture===!0?"Capture":"",a={handler:n,sensitivity:ua(o),direction:Fe(i),noop:Bt,mouseStart(r){Le(r,a)&&Nt(r)&&(xe(a,"temp",[[document,"mousemove","move",`notPassive${t}`],[document,"mouseup","end","notPassiveCapture"]]),a.start(r,!0))},touchStart(r){if(Le(r,a)){const u=r.target;xe(a,"temp",[[u,"touchmove","move","notPassiveCapture"],[u,"touchcancel","end","notPassiveCapture"],[u,"touchend","end","notPassiveCapture"]]),a.start(r)}},start(r,u){he.is.firefox===!0&&Ue(e,!0);const h=Pe(r);a.event={x:h.left,y:h.top,time:Date.now(),mouse:u===!0,dir:!1}},move(r){if(a.event===void 0)return;if(a.event.dir!==!1){Ee(r);return}const u=Date.now()-a.event.time;if(u===0)return;const h=Pe(r),l=h.left-a.event.x,s=Math.abs(l),v=h.top-a.event.y,d=Math.abs(v);if(a.event.mouse!==!0){if(s<a.sensitivity[1]&&d<a.sensitivity[1]){a.end(r);return}}else if(window.getSelection().toString()!==""){a.end(r);return}else if(s<a.sensitivity[2]&&d<a.sensitivity[2])return;const c=s/u,g=d/u;a.direction.vertical===!0&&s<d&&s<100&&g>a.sensitivity[0]&&(a.event.dir=v<0?"up":"down"),a.direction.horizontal===!0&&s>d&&d<100&&c>a.sensitivity[0]&&(a.event.dir=l<0?"left":"right"),a.direction.up===!0&&s<d&&v<0&&s<100&&g>a.sensitivity[0]&&(a.event.dir="up"),a.direction.down===!0&&s<d&&v>0&&s<100&&g>a.sensitivity[0]&&(a.event.dir="down"),a.direction.left===!0&&s>d&&l<0&&d<100&&c>a.sensitivity[0]&&(a.event.dir="left"),a.direction.right===!0&&s>d&&l>0&&d<100&&c>a.sensitivity[0]&&(a.event.dir="right"),a.event.dir!==!1?(Ee(r),a.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Lt(),a.styleCleanup=w=>{a.styleCleanup=void 0,document.body.classList.remove("non-selectable");const $=()=>{document.body.classList.remove("no-pointer-events--children")};w===!0?setTimeout($,50):$()}),a.handler({evt:r,touch:a.event.mouse!==!0,mouse:a.event.mouse,direction:a.event.dir,duration:u,distance:{x:s,y:d}})):a.end(r)},end(r){var u;a.event!==void 0&&(Ne(a,"temp"),he.is.firefox===!0&&Ue(e,!1),(u=a.styleCleanup)==null||u.call(a,!0),r!==void 0&&a.event.dir!==!1&&Ee(r),a.event=void 0)}};if(e.__qtouchswipe=a,i.mouse===!0){const r=i.mouseCapture===!0||i.mousecapture===!0?"Capture":"";xe(a,"main",[[e,"mousedown","mouseStart",`passive${r}`]])}he.has.touch===!0&&xe(a,"main",[[e,"touchstart","touchStart",`passive${i.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,n){const o=e.__qtouchswipe;o!==void 0&&(n.oldValue!==n.value&&(typeof n.value!="function"&&o.end(),o.handler=n.value),o.direction=Fe(n.modifiers))},beforeUnmount(e){var o;const n=e.__qtouchswipe;n!==void 0&&(Ne(n,"main"),Ne(n,"temp"),he.is.firefox===!0&&Ue(e,!1),(o=n.styleCleanup)==null||o.call(n),delete e.__qtouchswipe)}});function da(){let e=Object.create(null);return{getCache:(n,o)=>e[n]===void 0?e[n]=typeof o=="function"?o():o:e[n],setCache(n,o){e[n]=o},hasCache(n){return Object.hasOwnProperty.call(e,n)},clearCache(n){n!==void 0?delete e[n]:e=Object.create(null)}}}const va={name:{required:!0},disable:Boolean},_t={setup(e,{slots:n}){return()=>N("div",{class:"q-panel scroll",role:"tabpanel"},ke(n.default))}},fa={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},ma=["update:modelValue","beforeTransition","transition"];function ga(){const{props:e,emit:n,proxy:o}=ye(),{getCache:i}=da(),{registerTimeout:t}=Ye();let a,r;const u=G(null),h={value:null};function l(b){const U=e.vertical===!0?"up":"left";Q((o.$q.lang.rtl===!0?-1:1)*(b.direction===U?1:-1))}const s=f(()=>[[ca,l,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),v=f(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),d=f(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),c=f(()=>`--q-transition-duration: ${e.transitionDuration}ms`),g=f(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),w=f(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),$=f(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);oe(()=>e.modelValue,(b,U)=>{const P=C(b)===!0?M(b):-1;r!==!0&&I(P===-1?0:P<M(U)?-1:1),h.value!==P&&(h.value=P,n("beforeTransition",b,U),t(()=>{n("transition",b,U)},e.transitionDuration))});function V(){Q(1)}function x(){Q(-1)}function B(b){n("update:modelValue",b)}function C(b){return b!=null&&b!==""}function M(b){return a.findIndex(U=>U.props.name===b&&U.props.disable!==""&&U.props.disable!==!0)}function z(){return a.filter(b=>b.props.disable!==""&&b.props.disable!==!0)}function I(b){const U=b!==0&&e.animated===!0&&h.value!==-1?"q-transition--"+(b===-1?v.value:d.value):null;u.value!==U&&(u.value=U)}function Q(b,U=h.value){let P=U+b;for(;P!==-1&&P<a.length;){const T=a[P];if(T!==void 0&&T.props.disable!==""&&T.props.disable!==!0){I(b),r=!0,n("update:modelValue",T.props.name),setTimeout(()=>{r=!1});return}P+=b}e.infinite===!0&&a.length!==0&&U!==-1&&U!==a.length&&Q(b,b===-1?a.length:-1)}function k(){const b=M(e.modelValue);return h.value!==b&&(h.value=b),!0}function m(){const b=C(e.modelValue)===!0&&k()&&a[h.value];return e.keepAlive===!0?[N(cn,w.value,[N($.value===!0?i(g.value,()=>({..._t,name:g.value})):_t,{key:g.value,style:c.value},()=>b)])]:[N("div",{class:"q-panel scroll",style:c.value,key:g.value,role:"tabpanel"},[b])]}function q(){if(a.length!==0)return e.animated===!0?[N(Ut,{name:u.value},m)]:m()}function _(b){return a=$n(ke(b.default,[])).filter(U=>U.props!==null&&U.props.slot===void 0&&C(U.props.name)===!0),a.length}function p(){return a}return Object.assign(o,{next:V,previous:x,goTo:B}),{panelIndex:h,panelDirectives:s,updatePanelsList:_,updatePanelIndex:k,getPanelContent:q,getEnabledPanels:z,getPanels:p,isValidPanelName:C,keepAliveProps:w,needsUniqueKeepAliveWrapper:$,goToPanelByOffset:Q,goToPanel:B,nextPanel:V,previousPanel:x}}const _a=["top","right","bottom","left"],ha=["regular","flat","outline","push","unelevated"],pa=de({name:"QCarousel",props:{...at,...fa,...Bn,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:e=>ha.includes(e),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:e=>_a.includes(e)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...Mn,...ma],setup(e,{slots:n}){const{proxy:{$q:o}}=ye(),i=ot(e,o);let t=null,a;const{updatePanelsList:r,getPanelContent:u,panelDirectives:h,goToPanel:l,previousPanel:s,nextPanel:v,getEnabledPanels:d,panelIndex:c}=ga(),{inFullscreen:g}=Nn(),w=f(()=>g.value!==!0&&e.height!==void 0?{height:e.height}:{}),$=f(()=>e.vertical===!0?"vertical":"horizontal"),V=f(()=>e.navigationPosition||(e.vertical===!0?"right":"bottom")),x=f(()=>`q-carousel q-panel-parent q-carousel--with${e.padding===!0?"":"out"}-padding`+(g.value===!0?" fullscreen":"")+(i.value===!0?" q-carousel--dark q-dark":"")+(e.arrows===!0?` q-carousel--arrows-${$.value}`:"")+(e.navigation===!0?` q-carousel--navigation-${V.value}`:"")),B=f(()=>{const m=[e.prevIcon||o.iconSet.carousel[e.vertical===!0?"up":"left"],e.nextIcon||o.iconSet.carousel[e.vertical===!0?"down":"right"]];return e.vertical===!1&&o.lang.rtl===!0?m.reverse():m}),C=f(()=>e.navigationIcon||o.iconSet.carousel.navigationIcon),M=f(()=>e.navigationActiveIcon||C.value),z=f(()=>({color:e.controlColor,textColor:e.controlTextColor,round:!0,[e.controlType]:!0,dense:!0}));oe(()=>e.modelValue,()=>{e.autoplay&&I()}),oe(()=>e.autoplay,m=>{m?I():t!==null&&(clearTimeout(t),t=null)});function I(){const m=Vt(e.autoplay)===!0?Math.abs(e.autoplay):5e3;t!==null&&clearTimeout(t),t=setTimeout(()=>{t=null,m>=0?v():s()},m)}Ie(()=>{e.autoplay&&I()}),nt(()=>{t!==null&&clearTimeout(t)});function Q(m,q){return N("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${m} q-carousel__navigation--${V.value}`+(e.controlColor!==void 0?` text-${e.controlColor}`:"")},[N("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},d().map(q))])}function k(){const m=[];if(e.navigation===!0){const q=n["navigation-icon"]!==void 0?n["navigation-icon"]:p=>N(ge,{key:"nav"+p.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${p.active===!0?"":"in"}active`,...p.btnProps,onClick:p.onClick}),_=a-1;m.push(Q("buttons",(p,b)=>{const U=p.props.name,P=c.value===b;return q({index:b,maxIndex:_,name:U,active:P,btnProps:{icon:P===!0?M.value:C.value,size:"sm",...z.value},onClick:()=>{l(U)}})}))}else if(e.thumbnails===!0){const q=e.controlColor!==void 0?` text-${e.controlColor}`:"";m.push(Q("thumbnails",_=>{const p=_.props;return N("img",{key:"tmb#"+p.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${p.name===e.modelValue?"":"in"}active`+q,src:p.imgSrc||p["img-src"],onClick:()=>{l(p.name)}})}))}return e.arrows===!0&&c.value>=0&&((e.infinite===!0||c.value>0)&&m.push(N("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${$.value} absolute flex flex-center`},[N(ge,{icon:B.value[0],...z.value,onClick:s})])),(e.infinite===!0||c.value<a-1)&&m.push(N("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${$.value} absolute flex flex-center`},[N(ge,{icon:B.value[1],...z.value,onClick:v})]))),Tt(n.control,m)}return()=>(a=r(n),N("div",{class:x.value,style:w.value},[Dt("div",{class:"q-carousel__slides-container"},u(),"sl-cont",e.swipeable,()=>h.value)].concat(k())))}}),ba=de({name:"QCarouselSlide",props:{...va,imgSrc:String},setup(e,{slots:n}){const o=f(()=>e.imgSrc?{backgroundImage:`url("${e.imgSrc}")`}:{});return()=>N("div",{class:"q-carousel__slide",style:o.value},ke(n.default))}}),ya={...Rt,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},Ze=50,Kt=2*Ze,Qt=Kt*Math.PI,ka=Math.round(Qt*1e3)/1e3,wa=de({name:"QCircularProgress",props:{...ya,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(e,{slots:n}){const{proxy:{$q:o}}=ye(),i=At(e),t=f(()=>{const c=(o.lang.rtl===!0?-1:1)*e.angle;return{transform:e.reverse!==(o.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-c}deg)`:`rotate3d(0, 0, 1, ${c-90}deg)`}}),a=f(()=>e.instantFeedback!==!0&&e.indeterminate!==!0?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:""),r=f(()=>Kt/(1-e.thickness/2)),u=f(()=>`${r.value/2} ${r.value/2} ${r.value} ${r.value}`),h=f(()=>$e(e.value,e.min,e.max)),l=f(()=>e.max-e.min),s=f(()=>e.thickness/2*r.value),v=f(()=>{const c=(e.max-h.value)/l.value,g=e.rounded===!0&&h.value<e.max&&c<.25?s.value/2*(1-c/.25):0;return Qt*c+g});function d({thickness:c,offset:g,color:w,cls:$,rounded:V}){return N("circle",{class:"q-circular-progress__"+$+(w!==void 0?` text-${w}`:""),style:a.value,fill:"transparent",stroke:"currentColor","stroke-width":c,"stroke-dasharray":ka,"stroke-dashoffset":g,"stroke-linecap":V,cx:r.value,cy:r.value,r:Ze})}return()=>{const c=[];e.centerColor!==void 0&&e.centerColor!=="transparent"&&c.push(N("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:Ze-s.value/2,cx:r.value,cy:r.value})),e.trackColor!==void 0&&e.trackColor!=="transparent"&&c.push(d({cls:"track",thickness:s.value,offset:0,color:e.trackColor})),c.push(d({cls:"circle",thickness:s.value,offset:v.value,color:e.color,rounded:e.rounded===!0?"round":void 0}));const g=[N("svg",{class:"q-circular-progress__svg",style:t.value,viewBox:u.value,"aria-hidden":"true"},c)];return e.showValue===!0&&g.push(N("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},n.default!==void 0?n.default():[N("div",h.value)])),N("div",{class:`q-circular-progress q-circular-progress--${e.indeterminate===!0?"in":""}determinate`,style:i.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.indeterminate===!0?void 0:h.value},It(n.internal,g))}}});function Ge(e,n,o){const i=Pe(e);let t,a=i.left-n.event.x,r=i.top-n.event.y,u=Math.abs(a),h=Math.abs(r);const l=n.direction;l.horizontal===!0&&l.vertical!==!0?t=a<0?"left":"right":l.horizontal!==!0&&l.vertical===!0?t=r<0?"up":"down":l.up===!0&&r<0?(t="up",u>h&&(l.left===!0&&a<0?t="left":l.right===!0&&a>0&&(t="right"))):l.down===!0&&r>0?(t="down",u>h&&(l.left===!0&&a<0?t="left":l.right===!0&&a>0&&(t="right"))):l.left===!0&&a<0?(t="left",u<h&&(l.up===!0&&r<0?t="up":l.down===!0&&r>0&&(t="down"))):l.right===!0&&a>0&&(t="right",u<h&&(l.up===!0&&r<0?t="up":l.down===!0&&r>0&&(t="down")));let s=!1;if(t===void 0&&o===!1){if(n.event.isFirst===!0||n.event.lastDir===void 0)return{};t=n.event.lastDir,s=!0,t==="left"||t==="right"?(i.left-=a,u=0,a=0):(i.top-=r,h=0,r=0)}return{synthetic:s,payload:{evt:e,touch:n.event.mouse!==!0,mouse:n.event.mouse===!0,position:i,direction:t,isFirst:n.event.isFirst,isFinal:o===!0,duration:Date.now()-n.event.time,distance:{x:u,y:h},offset:{x:a,y:r},delta:{x:i.left-n.event.lastX,y:i.top-n.event.lastY}}}}let Sa=0;const Ca=tt({name:"touch-pan",beforeMount(e,{value:n,modifiers:o}){if(o.mouse!==!0&&he.has.touch!==!0)return;function i(a,r){o.mouse===!0&&r===!0?Ee(a):(o.stop===!0&&Be(a),o.prevent===!0&&mt(a))}const t={uid:"qvtp_"+Sa++,handler:n,modifiers:o,direction:Fe(o),noop:Bt,mouseStart(a){Le(a,t)&&Nt(a)&&(xe(t,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),t.start(a,!0))},touchStart(a){if(Le(a,t)){const r=a.target;xe(t,"temp",[[r,"touchmove","move","notPassiveCapture"],[r,"touchcancel","end","passiveCapture"],[r,"touchend","end","passiveCapture"]]),t.start(a)}},start(a,r){if(he.is.firefox===!0&&Ue(e,!0),t.lastEvt=a,r===!0||o.stop===!0){if(t.direction.all!==!0&&(r!==!0||t.modifiers.mouseAllDir!==!0&&t.modifiers.mousealldir!==!0)){const l=a.type.indexOf("mouse")!==-1?new MouseEvent(a.type,a):new TouchEvent(a.type,a);a.defaultPrevented===!0&&mt(l),a.cancelBubble===!0&&Be(l),Object.assign(l,{qKeyEvent:a.qKeyEvent,qClickOutside:a.qClickOutside,qAnchorHandled:a.qAnchorHandled,qClonedBy:a.qClonedBy===void 0?[t.uid]:a.qClonedBy.concat(t.uid)}),t.initialEvent={target:a.target,event:l}}Be(a)}const{left:u,top:h}=Pe(a);t.event={x:u,y:h,time:Date.now(),mouse:r===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:u,lastY:h}},move(a){if(t.event===void 0)return;const r=Pe(a),u=r.left-t.event.x,h=r.top-t.event.y;if(u===0&&h===0)return;t.lastEvt=a;const l=t.event.mouse===!0,s=()=>{i(a,l);let c;o.preserveCursor!==!0&&o.preservecursor!==!0&&(c=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),l===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Lt(),t.styleCleanup=g=>{if(t.styleCleanup=void 0,c!==void 0&&(document.documentElement.style.cursor=c),document.body.classList.remove("non-selectable"),l===!0){const w=()=>{document.body.classList.remove("no-pointer-events--children")};g!==void 0?setTimeout(()=>{w(),g()},50):w()}else g!==void 0&&g()}};if(t.event.detected===!0){t.event.isFirst!==!0&&i(a,t.event.mouse);const{payload:c,synthetic:g}=Ge(a,t,!1);c!==void 0&&(t.handler(c)===!1?t.end(a):(t.styleCleanup===void 0&&t.event.isFirst===!0&&s(),t.event.lastX=c.position.left,t.event.lastY=c.position.top,t.event.lastDir=g===!0?void 0:c.direction,t.event.isFirst=!1));return}if(t.direction.all===!0||l===!0&&(t.modifiers.mouseAllDir===!0||t.modifiers.mousealldir===!0)){s(),t.event.detected=!0,t.move(a);return}const v=Math.abs(u),d=Math.abs(h);v!==d&&(t.direction.horizontal===!0&&v>d||t.direction.vertical===!0&&v<d||t.direction.up===!0&&v<d&&h<0||t.direction.down===!0&&v<d&&h>0||t.direction.left===!0&&v>d&&u<0||t.direction.right===!0&&v>d&&u>0?(t.event.detected=!0,t.move(a)):t.end(a,!0))},end(a,r){var u;if(t.event!==void 0){if(Ne(t,"temp"),he.is.firefox===!0&&Ue(e,!1),r===!0)(u=t.styleCleanup)==null||u.call(t),t.event.detected!==!0&&t.initialEvent!==void 0&&t.initialEvent.target.dispatchEvent(t.initialEvent.event);else if(t.event.detected===!0){t.event.isFirst===!0&&t.handler(Ge(a===void 0?t.lastEvt:a,t).payload);const{payload:h}=Ge(a===void 0?t.lastEvt:a,t,!0),l=()=>{t.handler(h)};t.styleCleanup!==void 0?t.styleCleanup(l):l()}t.event=void 0,t.initialEvent=void 0,t.lastEvt=void 0}}};if(e.__qtouchpan=t,o.mouse===!0){const a=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";xe(t,"main",[[e,"mousedown","mouseStart",`passive${a}`]])}he.has.touch===!0&&xe(t,"main",[[e,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,n){const o=e.__qtouchpan;o!==void 0&&(n.oldValue!==n.value&&(typeof value!="function"&&o.end(),o.handler=n.value),o.direction=Fe(n.modifiers))},beforeUnmount(e){var o;const n=e.__qtouchpan;n!==void 0&&(n.event!==void 0&&n.end(),Ne(n,"main"),Ne(n,"temp"),he.is.firefox===!0&&Ue(e,!1),(o=n.styleCleanup)==null||o.call(n),delete e.__qtouchpan)}}),ht="q-slider__marker-labels",xa=e=>({value:e}),qa=({marker:e})=>N("div",{key:e.value,style:e.style,class:e.classes},e.label),Wt=[34,37,40,33,39,38],$a={...at,...zt,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},Ma=["pan","update:modelValue","change"];function Ba({updateValue:e,updatePosition:n,getDragging:o,formAttrs:i}){const{props:t,emit:a,slots:r,proxy:{$q:u}}=ye(),h=ot(t,u),l=Un(i),s=G(!1),v=G(!1),d=G(!1),c=G(!1),g=f(()=>t.vertical===!0?"--v":"--h"),w=f(()=>"-"+(t.switchLabelSide===!0?"switched":"standard")),$=f(()=>t.vertical===!0?t.reverse===!0:t.reverse!==(u.lang.rtl===!0)),V=f(()=>isNaN(t.innerMin)===!0||t.innerMin<t.min?t.min:t.innerMin),x=f(()=>isNaN(t.innerMax)===!0||t.innerMax>t.max?t.max:t.innerMax),B=f(()=>t.disable!==!0&&t.readonly!==!0&&V.value<x.value),C=f(()=>{if(t.step===0)return O=>O;const S=(String(t.step).trim().split(".")[1]||"").length;return O=>parseFloat(O.toFixed(S))}),M=f(()=>t.step===0?1:t.step),z=f(()=>B.value===!0?t.tabindex||0:-1),I=f(()=>t.max-t.min),Q=f(()=>x.value-V.value),k=f(()=>Te(V.value)),m=f(()=>Te(x.value)),q=f(()=>t.vertical===!0?$.value===!0?"bottom":"top":$.value===!0?"right":"left"),_=f(()=>t.vertical===!0?"height":"width"),p=f(()=>t.vertical===!0?"width":"height"),b=f(()=>t.vertical===!0?"vertical":"horizontal"),U=f(()=>{const S={role:"slider","aria-valuemin":V.value,"aria-valuemax":x.value,"aria-orientation":b.value,"data-step":t.step};return t.disable===!0?S["aria-disabled"]="true":t.readonly===!0&&(S["aria-readonly"]="true"),S}),P=f(()=>`q-slider q-slider${g.value} q-slider--${s.value===!0?"":"in"}active inline no-wrap `+(t.vertical===!0?"row":"column")+(t.disable===!0?" disabled":" q-slider--enabled"+(B.value===!0?" q-slider--editable":""))+(d.value==="both"?" q-slider--focus":"")+(t.label||t.labelAlways===!0?" q-slider--label":"")+(t.labelAlways===!0?" q-slider--label-always":"")+(h.value===!0?" q-slider--dark":"")+(t.dense===!0?" q-slider--dense q-slider--dense"+g.value:""));function T(S){const O="q-slider__"+S;return`${O} ${O}${g.value} ${O}${g.value}${w.value}`}function J(S){const O="q-slider__"+S;return`${O} ${O}${g.value}`}const te=f(()=>{const S=t.selectionColor||t.color;return"q-slider__selection absolute"+(S!==void 0?` text-${S}`:"")}),H=f(()=>J("markers")+" absolute overflow-hidden"),Y=f(()=>J("track-container")),y=f(()=>T("pin")),j=f(()=>T("label")),E=f(()=>T("text-container")),Z=f(()=>T("marker-labels-container")+(t.markerLabelsClass!==void 0?` ${t.markerLabelsClass}`:"")),W=f(()=>"q-slider__track relative-position no-outline"+(t.trackColor!==void 0?` bg-${t.trackColor}`:"")),ie=f(()=>{const S={[p.value]:t.trackSize};return t.trackImg!==void 0&&(S.backgroundImage=`url(${t.trackImg}) !important`),S}),we=f(()=>"q-slider__inner absolute"+(t.innerTrackColor!==void 0?` bg-${t.innerTrackColor}`:"")),ce=f(()=>{const S=m.value-k.value,O={[q.value]:`${100*k.value}%`,[_.value]:S===0?"2px":`${100*S}%`};return t.innerTrackImg!==void 0&&(O.backgroundImage=`url(${t.innerTrackImg}) !important`),O});function D(S){const{min:O,max:ee,step:ne}=t;let re=O+S*(ee-O);if(ne>0){const Se=(re-V.value)%ne;re+=(Math.abs(Se)>=ne/2?(Se<0?-1:1)*ne:0)-Se}return re=C.value(re),$e(re,V.value,x.value)}function Te(S){return I.value===0?0:(S-t.min)/I.value}function ve(S,O){const ee=Pe(S),ne=t.vertical===!0?$e((ee.top-O.top)/O.height,0,1):$e((ee.left-O.left)/O.width,0,1);return $e($.value===!0?1-ne:ne,k.value,m.value)}const st=f(()=>Vt(t.markers)===!0?t.markers:M.value),ut=f(()=>{const S=[],O=st.value,ee=t.max;let ne=t.min;do S.push(ne),ne+=O;while(ne<ee);return S.push(ee),S}),ct=f(()=>{const S=` ${ht}${g.value}-`;return ht+`${S}${t.switchMarkerLabelsSide===!0?"switched":"standard"}${S}${$.value===!0?"rtl":"ltr"}`}),je=f(()=>t.markerLabels===!1?null:Zt(t.markerLabels).map((S,O)=>({index:O,value:S.value,label:S.label||S.value,classes:ct.value+(S.classes!==void 0?" "+S.classes:""),style:{...vt(S.value),...S.style||{}}}))),dt=f(()=>({markerList:je.value,markerMap:Jt.value,classes:ct.value,getStyle:vt})),Yt=f(()=>{const S=Q.value===0?"2px":100*st.value/Q.value;return{...ce.value,backgroundSize:t.vertical===!0?`2px ${S}%`:`${S}% 2px`}});function Zt(S){if(S===!1)return null;if(S===!0)return ut.value.map(xa);if(typeof S=="function")return ut.value.map(ee=>{const ne=S(ee);return We(ne)===!0?{...ne,value:ee}:{value:ee,label:ne}});const O=({value:ee})=>ee>=t.min&&ee<=t.max;return Array.isArray(S)===!0?S.map(ee=>We(ee)===!0?ee:{value:ee}).filter(O):Object.keys(S).map(ee=>{const ne=S[ee],re=Number(ee);return We(ne)===!0?{...ne,value:re}:{value:re,label:ne}}).filter(O)}function vt(S){return{[q.value]:`${100*(S-t.min)/I.value}%`}}const Jt=f(()=>{if(t.markerLabels===!1)return null;const S={};return je.value.forEach(O=>{S[O.value]=O}),S});function en(){if(r["marker-label-group"]!==void 0)return r["marker-label-group"](dt.value);const S=r["marker-label"]||qa;return je.value.map(O=>S({marker:O,...dt.value}))}const tn=f(()=>[[Ca,nn,void 0,{[b.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function nn(S){S.isFinal===!0?(c.value!==void 0&&(n(S.evt),S.touch===!0&&e(!0),c.value=void 0,a("pan","end")),s.value=!1,d.value=!1):S.isFirst===!0?(c.value=o(S.evt),n(S.evt),e(),s.value=!0,a("pan","start")):(n(S.evt),e())}function ft(){d.value=!1}function an(S){n(S,o(S)),e(),v.value=!0,s.value=!0,document.addEventListener("mouseup",He,!0)}function He(){v.value=!1,s.value=!1,e(!0),ft(),document.removeEventListener("mouseup",He,!0)}function on(S){n(S,o(S)),e(!0)}function ln(S){Wt.includes(S.keyCode)&&e(!0)}function rn(S){if(t.vertical===!0)return null;const O=u.lang.rtl!==t.reverse?1-S:S;return{transform:`translateX(calc(${2*O-1} * ${t.thumbSize} / 2 + ${50-100*O}%))`}}function sn(S){const O=f(()=>v.value===!1&&(d.value===S.focusValue||d.value==="both")?" q-slider--focus":""),ee=f(()=>`q-slider__thumb q-slider__thumb${g.value} q-slider__thumb${g.value}-${$.value===!0?"rtl":"ltr"} absolute non-selectable`+O.value+(S.thumbColor.value!==void 0?` text-${S.thumbColor.value}`:"")),ne=f(()=>({width:t.thumbSize,height:t.thumbSize,[q.value]:`${100*S.ratio.value}%`,zIndex:d.value===S.focusValue?2:void 0})),re=f(()=>S.labelColor.value!==void 0?` text-${S.labelColor.value}`:""),Se=f(()=>rn(S.ratio.value)),Ke=f(()=>"q-slider__text"+(S.labelTextColor.value!==void 0?` text-${S.labelTextColor.value}`:""));return()=>{const Qe=[N("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[N("path",{d:t.thumbPath})]),N("div",{class:"q-slider__focus-ring fit"})];return(t.label===!0||t.labelAlways===!0)&&(Qe.push(N("div",{class:y.value+" absolute fit no-pointer-events"+re.value},[N("div",{class:j.value,style:{minWidth:t.thumbSize}},[N("div",{class:E.value,style:Se.value},[N("span",{class:Ke.value},S.label.value)])])])),t.name!==void 0&&t.disable!==!0&&l(Qe,"push")),N("div",{class:ee.value,style:ne.value,...S.getNodeData()},Qe)}}function un(S,O,ee,ne){const re=[];t.innerTrackColor!=="transparent"&&re.push(N("div",{key:"inner",class:we.value,style:ce.value})),t.selectionColor!=="transparent"&&re.push(N("div",{key:"selection",class:te.value,style:S.value})),t.markers!==!1&&re.push(N("div",{key:"marker",class:H.value,style:Yt.value})),ne(re);const Se=[Dt("div",{key:"trackC",class:Y.value,tabindex:O.value,...ee.value},[N("div",{class:W.value,style:ie.value},re)],"slide",B.value,()=>tn.value)];if(t.markerLabels!==!1){const Ke=t.switchMarkerLabelsSide===!0?"unshift":"push";Se[Ke](N("div",{key:"markerL",class:Z.value},en()))}return Se}return nt(()=>{document.removeEventListener("mouseup",He,!0)}),{state:{active:s,focus:d,preventFocus:v,dragging:c,editable:B,classes:P,tabindex:z,attributes:U,roundValueFn:C,keyStep:M,trackLen:I,innerMin:V,innerMinRatio:k,innerMax:x,innerMaxRatio:m,positionProp:q,sizeProp:_,isReversed:$},methods:{onActivate:an,onMobileClick:on,onBlur:ft,onKeyup:ln,getContent:un,getThumbRenderFn:sn,convertRatioToModel:D,convertModelToRatio:Te,getDraggingRatio:ve}}}const Na=()=>({}),Ua=de({name:"QSlider",props:{...$a,modelValue:{required:!0,default:null,validator:e=>typeof e=="number"||e===null},labelValue:[String,Number]},emits:Ma,setup(e,{emit:n}){const{proxy:{$q:o}}=ye(),{state:i,methods:t}=Ba({updateValue:g,updatePosition:$,getDragging:w,formAttrs:Vn(e)}),a=G(null),r=G(0),u=G(0);function h(){u.value=e.modelValue===null?i.innerMin.value:$e(e.modelValue,i.innerMin.value,i.innerMax.value)}oe(()=>`${e.modelValue}|${i.innerMin.value}|${i.innerMax.value}`,h),h();const l=f(()=>t.convertModelToRatio(u.value)),s=f(()=>i.active.value===!0?r.value:l.value),v=f(()=>{const B={[i.positionProp.value]:`${100*i.innerMinRatio.value}%`,[i.sizeProp.value]:`${100*(s.value-i.innerMinRatio.value)}%`};return e.selectionImg!==void 0&&(B.backgroundImage=`url(${e.selectionImg}) !important`),B}),d=t.getThumbRenderFn({focusValue:!0,getNodeData:Na,ratio:s,label:f(()=>e.labelValue!==void 0?e.labelValue:u.value),thumbColor:f(()=>e.thumbColor||e.color),labelColor:f(()=>e.labelColor),labelTextColor:f(()=>e.labelTextColor)}),c=f(()=>i.editable.value!==!0?{}:o.platform.is.mobile===!0?{onClick:t.onMobileClick}:{onMousedown:t.onActivate,onFocus:V,onBlur:t.onBlur,onKeydown:x,onKeyup:t.onKeyup});function g(B){u.value!==e.modelValue&&n("update:modelValue",u.value),B===!0&&n("change",u.value)}function w(){return a.value.getBoundingClientRect()}function $(B,C=i.dragging.value){const M=t.getDraggingRatio(B,C);u.value=t.convertRatioToModel(M),r.value=e.snap!==!0||e.step===0?M:t.convertModelToRatio(u.value)}function V(){i.focus.value=!0}function x(B){if(Wt.includes(B.keyCode)===!1)return;Ee(B);const C=([34,33].includes(B.keyCode)?10:1)*i.keyStep.value,M=([34,37,40].includes(B.keyCode)?-1:1)*(i.isReversed.value===!0?-1:1)*(e.vertical===!0?-1:1)*C;u.value=$e(i.roundValueFn.value(u.value+M),i.innerMin.value,i.innerMax.value),g()}return()=>{const B=t.getContent(v,i.tabindex,c,C=>{C.push(d())});return N("div",{ref:a,class:i.classes.value+(e.modelValue===null?" q-slider--no-value":""),...i.attributes.value,"aria-valuenow":e.modelValue},B)}}});function Va(e,n){function o(){const i=e.modelValue;try{const t="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(i)===i&&("length"in i?Array.from(i):[i]).forEach(a=>{t.items.add(a)}),{files:t.files}}catch{return{files:void 0}}}return f(()=>{if(e.type==="file")return o()})}const Pa={ratio:[String,Number]};function Ra(e,n){return f(()=>{const o=Number(e.ratio||(n!==void 0?n.value:void 0));return isNaN(o)!==!0&&o>0?{paddingBottom:`${100/o}%`}:null})}const Aa=1.7778,Ea=de({name:"QImg",props:{...Pa,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:Aa},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:n,emit:o}){const i=G(e.initialRatio),t=Ra(e,i),a=ye(),{registerTimeout:r,removeTimeout:u}=Ye(),{registerTimeout:h,removeTimeout:l}=Ye(),s=f(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),v=f(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),d=[G(null),G(s.value)],c=G(0),g=G(!1),w=G(!1),$=f(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),V=f(()=>({width:e.width,height:e.height})),x=f(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),B=f(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function C(){if(l(),e.loadingShowDelay===0){g.value=!0;return}h(()=>{g.value=!0},e.loadingShowDelay)}function M(){l(),g.value=!1}function z({target:_}){Xe(a)===!1&&(u(),i.value=_.naturalHeight===0?.5:_.naturalWidth/_.naturalHeight,I(_,1))}function I(_,p){p===1e3||Xe(a)===!0||(_.complete===!0?Q(_):r(()=>{I(_,p+1)},50))}function Q(_){Xe(a)!==!0&&(c.value=c.value^1,d[c.value].value=null,M(),_.getAttribute("__qerror")!=="true"&&(w.value=!1),o("load",_.currentSrc||_.src))}function k(_){u(),M(),w.value=!0,d[c.value].value=v.value,d[c.value^1].value=s.value,o("error",_)}function m(_){const p=d[_].value,b={key:"img_"+_,class:x.value,style:B.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...p};return c.value===_?Object.assign(b,{class:b.class+"current",onLoad:z,onError:k}):b.class+="loaded",N("div",{class:"q-img__container absolute-full",key:"img"+_},N("img",b))}function q(){return g.value===!1?N("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},ke(n[w.value===!0?"error":"default"])):N("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},n.loading!==void 0?n.loading():e.noSpinner===!0?void 0:[N(Ot,{color:e.spinnerColor,size:e.spinnerSize})])}{let _=function(){oe(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,p=>{u(),w.value=!1,p===null?(M(),d[c.value^1].value=s.value):C(),d[c.value].value=p},{immediate:!0})};dn.value===!0?Ie(_):_()}return()=>{const _=[];return t.value!==null&&_.push(N("div",{key:"filler",style:t.value})),d[0].value!==null&&_.push(m(0)),d[1].value!==null&&_.push(m(1)),_.push(N(Ut,{name:"q-transition--fade"},q)),N("div",{key:"main",class:$.value,style:V.value,role:"img","aria-label":e.alt},_)}}}),pt={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},De={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleLowerCase()}},Xt=Object.keys(De);Xt.forEach(e=>{De[e].regex=new RegExp(De[e].pattern)});const Ia=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+Xt.join("")+"])|(.)","g"),bt=/[.*+?^${}()|[\]\\]/g,ae="",Ta={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function Fa(e,n,o,i){let t,a,r,u,h,l;const s=G(null),v=G(c());function d(){return e.autogrow===!0||["textarea","text","search","url","tel","password"].includes(e.type)}oe(()=>e.type+e.autogrow,w),oe(()=>e.mask,k=>{if(k!==void 0)$(v.value,!0);else{const m=I(v.value);w(),e.modelValue!==m&&n("update:modelValue",m)}}),oe(()=>e.fillMask+e.reverseFillMask,()=>{s.value===!0&&$(v.value,!0)}),oe(()=>e.unmaskedValue,()=>{s.value===!0&&$(v.value)});function c(){if(w(),s.value===!0){const k=M(I(e.modelValue));return e.fillMask!==!1?Q(k):k}return e.modelValue}function g(k){if(k<t.length)return t.slice(-k);let m="",q=t;const _=q.indexOf(ae);if(_!==-1){for(let p=k-q.length;p>0;p--)m+=ae;q=q.slice(0,_)+m+q.slice(_)}return q}function w(){if(s.value=e.mask!==void 0&&e.mask.length!==0&&d(),s.value===!1){u=void 0,t="",a="";return}const k=pt[e.mask]===void 0?e.mask:pt[e.mask],m=typeof e.fillMask=="string"&&e.fillMask.length!==0?e.fillMask.slice(0,1):"_",q=m.replace(bt,"\\$&"),_=[],p=[],b=[];let U=e.reverseFillMask===!0,P="",T="";k.replace(Ia,(Y,y,j,E,Z)=>{if(E!==void 0){const W=De[E];b.push(W),T=W.negate,U===!0&&(p.push("(?:"+T+"+)?("+W.pattern+"+)?(?:"+T+"+)?("+W.pattern+"+)?"),U=!1),p.push("(?:"+T+"+)?("+W.pattern+")?")}else if(j!==void 0)P="\\"+(j==="\\"?"":j),b.push(j),_.push("([^"+P+"]+)?"+P+"?");else{const W=y!==void 0?y:Z;P=W==="\\"?"\\\\\\\\":W.replace(bt,"\\\\$&"),b.push(W),_.push("([^"+P+"]+)?"+P+"?")}});const J=new RegExp("^"+_.join("")+"("+(P===""?".":"[^"+P+"]")+"+)?"+(P===""?"":"["+P+"]*")+"$"),te=p.length-1,H=p.map((Y,y)=>y===0&&e.reverseFillMask===!0?new RegExp("^"+q+"*"+Y):y===te?new RegExp("^"+Y+"("+(T===""?".":T)+"+)?"+(e.reverseFillMask===!0?"$":q+"*")):new RegExp("^"+Y));r=b,u=Y=>{const y=J.exec(e.reverseFillMask===!0?Y:Y.slice(0,b.length+1));y!==null&&(Y=y.slice(1).join(""));const j=[],E=H.length;for(let Z=0,W=Y;Z<E;Z++){const ie=H[Z].exec(W);if(ie===null)break;W=W.slice(ie.shift().length),j.push(...ie)}return j.length!==0?j.join(""):Y},t=b.map(Y=>typeof Y=="string"?Y:ae).join(""),a=t.split(ae).join(m)}function $(k,m,q){const _=i.value,p=_.selectionEnd,b=_.value.length-p,U=I(k);m===!0&&w();const P=M(U),T=e.fillMask!==!1?Q(P):P,J=v.value!==T;_.value!==T&&(_.value=T),J===!0&&(v.value=T),document.activeElement===_&&Me(()=>{if(T===a){const H=e.reverseFillMask===!0?a.length:0;_.setSelectionRange(H,H,"forward");return}if(q==="insertFromPaste"&&e.reverseFillMask!==!0){const H=_.selectionEnd;let Y=p-1;for(let y=h;y<=Y&&y<H;y++)t[y]!==ae&&Y++;x.right(_,Y);return}if(["deleteContentBackward","deleteContentForward"].indexOf(q)!==-1){const H=e.reverseFillMask===!0?p===0?T.length>P.length?1:0:Math.max(0,T.length-(T===a?0:Math.min(P.length,b)+1))+1:p;_.setSelectionRange(H,H,"forward");return}if(e.reverseFillMask===!0)if(J===!0){const H=Math.max(0,T.length-(T===a?0:Math.min(P.length,b+1)));H===1&&p===1?_.setSelectionRange(H,H,"forward"):x.rightReverse(_,H)}else{const H=T.length-b;_.setSelectionRange(H,H,"backward")}else if(J===!0){const H=Math.max(0,t.indexOf(ae),Math.min(P.length,p)-1);x.right(_,H)}else{const H=p-1;x.right(_,H)}});const te=e.unmaskedValue===!0?I(T):T;String(e.modelValue)!==te&&(e.modelValue!==null||te!=="")&&o(te,!0)}function V(k,m,q){const _=M(I(k.value));m=Math.max(0,t.indexOf(ae),Math.min(_.length,m)),h=m,k.setSelectionRange(m,q,"forward")}const x={left(k,m){const q=t.slice(m-1).indexOf(ae)===-1;let _=Math.max(0,m-1);for(;_>=0;_--)if(t[_]===ae){m=_,q===!0&&m++;break}if(_<0&&t[m]!==void 0&&t[m]!==ae)return x.right(k,0);m>=0&&k.setSelectionRange(m,m,"backward")},right(k,m){const q=k.value.length;let _=Math.min(q,m+1);for(;_<=q;_++)if(t[_]===ae){m=_;break}else t[_-1]===ae&&(m=_);if(_>q&&t[m-1]!==void 0&&t[m-1]!==ae)return x.left(k,q);k.setSelectionRange(m,m,"forward")},leftReverse(k,m){const q=g(k.value.length);let _=Math.max(0,m-1);for(;_>=0;_--)if(q[_-1]===ae){m=_;break}else if(q[_]===ae&&(m=_,_===0))break;if(_<0&&q[m]!==void 0&&q[m]!==ae)return x.rightReverse(k,0);m>=0&&k.setSelectionRange(m,m,"backward")},rightReverse(k,m){const q=k.value.length,_=g(q),p=_.slice(0,m+1).indexOf(ae)===-1;let b=Math.min(q,m+1);for(;b<=q;b++)if(_[b-1]===ae){m=b,m>0&&p===!0&&m--;break}if(b>q&&_[m-1]!==void 0&&_[m-1]!==ae)return x.leftReverse(k,q);k.setSelectionRange(m,m,"forward")}};function B(k){n("click",k),l=void 0}function C(k){if(n("keydown",k),vn(k)===!0||k.altKey===!0)return;const m=i.value,q=m.selectionStart,_=m.selectionEnd;if(k.shiftKey||(l=void 0),k.keyCode===37||k.keyCode===39){k.shiftKey&&l===void 0&&(l=m.selectionDirection==="forward"?q:_);const p=x[(k.keyCode===39?"right":"left")+(e.reverseFillMask===!0?"Reverse":"")];if(k.preventDefault(),p(m,l===q?_:q),k.shiftKey){const b=m.selectionStart;m.setSelectionRange(Math.min(l,b),Math.max(l,b),"forward")}}else k.keyCode===8&&e.reverseFillMask!==!0&&q===_?(x.left(m,q),m.setSelectionRange(m.selectionStart,_,"backward")):k.keyCode===46&&e.reverseFillMask===!0&&q===_&&(x.rightReverse(m,_),m.setSelectionRange(q,m.selectionEnd,"forward"))}function M(k){if(k==null||k==="")return"";if(e.reverseFillMask===!0)return z(k);const m=r;let q=0,_="";for(let p=0;p<m.length;p++){const b=k[q],U=m[p];if(typeof U=="string")_+=U;else if(b!==void 0&&U.regex.test(b))_+=U.transform!==void 0?U.transform(b):b,q++;else return _}return _}function z(k){const m=r,q=t.indexOf(ae);let _=k.length-1,p="";for(let b=m.length-1;b>=0&&_!==-1;b--){const U=m[b];let P=k[_];if(typeof U=="string")p=U+p;else if(P!==void 0&&U.regex.test(P))do p=(U.transform!==void 0?U.transform(P):P)+p,_--,P=k[_];while(q===b&&P!==void 0&&U.regex.test(P));else return p}return p}function I(k){return typeof k!="string"||u===void 0?typeof k=="number"?u(""+k):k:u(k)}function Q(k){return a.length-k.length<=0?k:e.reverseFillMask===!0&&k.length!==0?a.slice(0,-k.length)+k:k+a.slice(k.length)}return{innerValue:v,hasMask:s,moveCursorForPaste:V,updateMaskValue:$,onMaskedKeydown:C,onMaskedClick:B}}const La=de({name:"QInput",inheritAttrs:!1,props:{...Rn,...Ta,...zt,modelValue:[String,Number,FileList],shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...Pn,"paste","change","keydown","click","animationend"],setup(e,{emit:n,attrs:o}){const{proxy:i}=ye(),{$q:t}=i,a={};let r=NaN,u,h,l=null,s;const v=G(null),d=An(e),{innerValue:c,hasMask:g,moveCursorForPaste:w,updateMaskValue:$,onMaskedKeydown:V,onMaskedClick:x}=Fa(e,n,P,v),B=Va(e),C=f(()=>gt(c.value)),M=In(b),z=En({changeEvent:!0}),I=f(()=>e.type==="textarea"||e.autogrow===!0),Q=f(()=>I.value===!0||["text","search","url","tel","password"].includes(e.type)),k=f(()=>{const y={...z.splitAttrs.listeners.value,onInput:b,onPaste:p,onChange:J,onBlur:te,onFocus:Be};return y.onCompositionstart=y.onCompositionupdate=y.onCompositionend=M,g.value===!0&&(y.onKeydown=V,y.onClick=x),e.autogrow===!0&&(y.onAnimationend=U),y}),m=f(()=>{const y={tabindex:0,"data-autofocus":e.autofocus===!0||void 0,rows:e.type==="textarea"?6:void 0,"aria-label":e.label,name:d.value,...z.splitAttrs.attributes.value,id:z.targetUid.value,maxlength:e.maxlength,disabled:e.disable===!0,readonly:e.readonly===!0};return I.value===!1&&(y.type=e.type),e.autogrow===!0&&(y.rows=1),y});oe(()=>e.type,()=>{v.value&&(v.value.value=e.modelValue)}),oe(()=>e.modelValue,y=>{if(g.value===!0){if(h===!0&&(h=!1,String(y)===r))return;$(y)}else c.value!==y&&(c.value=y,e.type==="number"&&a.hasOwnProperty("value")===!0&&(u===!0?u=!1:delete a.value));e.autogrow===!0&&Me(T)}),oe(()=>e.autogrow,y=>{y===!0?Me(T):v.value!==null&&o.rows>0&&(v.value.style.height="auto")}),oe(()=>e.dense,()=>{e.autogrow===!0&&Me(T)});function q(){Fn(()=>{const y=document.activeElement;v.value!==null&&v.value!==y&&(y===null||y.id!==z.targetUid.value)&&v.value.focus({preventScroll:!0})})}function _(){var y;(y=v.value)==null||y.select()}function p(y){if(g.value===!0&&e.reverseFillMask!==!0){const j=y.target;w(j,j.selectionStart,j.selectionEnd)}n("paste",y)}function b(y){if(!y||!y.target)return;if(e.type==="file"){n("update:modelValue",y.target.files);return}const j=y.target.value;if(y.target.qComposing===!0){a.value=j;return}if(g.value===!0)$(j,!1,y.inputType);else if(P(j),Q.value===!0&&y.target===document.activeElement){const{selectionStart:E,selectionEnd:Z}=y.target;E!==void 0&&Z!==void 0&&Me(()=>{y.target===document.activeElement&&j.indexOf(y.target.value)===0&&y.target.setSelectionRange(E,Z)})}e.autogrow===!0&&T()}function U(y){n("animationend",y),T()}function P(y,j){s=()=>{l=null,e.type!=="number"&&a.hasOwnProperty("value")===!0&&delete a.value,e.modelValue!==y&&r!==y&&(r=y,j===!0&&(h=!0),n("update:modelValue",y),Me(()=>{r===y&&(r=NaN)})),s=void 0},e.type==="number"&&(u=!0,a.value=y),e.debounce!==void 0?(l!==null&&clearTimeout(l),a.value=y,l=setTimeout(s,e.debounce)):s()}function T(){requestAnimationFrame(()=>{const y=v.value;if(y!==null){const j=y.parentNode.style,{scrollTop:E}=y,{overflowY:Z,maxHeight:W}=t.platform.is.firefox===!0?{}:window.getComputedStyle(y),ie=Z!==void 0&&Z!=="scroll";ie===!0&&(y.style.overflowY="hidden"),j.marginBottom=y.scrollHeight-1+"px",y.style.height="1px",y.style.height=y.scrollHeight+"px",ie===!0&&(y.style.overflowY=parseInt(W,10)<y.scrollHeight?"auto":"hidden"),j.marginBottom="",y.scrollTop=E}})}function J(y){M(y),l!==null&&(clearTimeout(l),l=null),s==null||s(),n("change",y.target.value)}function te(y){y!==void 0&&Be(y),l!==null&&(clearTimeout(l),l=null),s==null||s(),u=!1,h=!1,delete a.value,e.type!=="file"&&setTimeout(()=>{v.value!==null&&(v.value.value=c.value!==void 0?c.value:"")})}function H(){return a.hasOwnProperty("value")===!0?a.value:c.value!==void 0?c.value:""}nt(()=>{te()}),Ie(()=>{e.autogrow===!0&&T()}),Object.assign(z,{innerValue:c,fieldClass:f(()=>`q-${I.value===!0?"textarea":"input"}`+(e.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:f(()=>e.type!=="file"&&typeof e.shadowText=="string"&&e.shadowText.length!==0),inputRef:v,emitValue:P,hasValue:C,floatingLabel:f(()=>C.value===!0&&(e.type!=="number"||isNaN(c.value)===!1)||gt(e.displayValue)),getControl:()=>N(I.value===!0?"textarea":"input",{ref:v,class:["q-field__native q-placeholder",e.inputClass],style:e.inputStyle,...m.value,...k.value,...e.type!=="file"?{value:H()}:B.value}),getShadowControl:()=>N("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(I.value===!0?"":" text-no-wrap")},[N("span",{class:"invisible"},H()),N("span",e.shadowText)])});const Y=Tn(z);return Object.assign(i,{focus:q,select:_,getNativeElement:()=>v.value}),fn(i,"nativeEl",()=>v.value),Y}});function yt(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const n=parseInt(e,10);return isNaN(n)?0:n}const Da=tt({name:"close-popup",beforeMount(e,{value:n}){const o={depth:yt(n),handler(i){o.depth!==0&&setTimeout(()=>{const t=Ln(e);t!==void 0&&Dn(t,i,o.depth)})},handlerKey(i){mn(i,13)===!0&&o.handler(i)}};e.__qclosepopup=o,e.addEventListener("click",o.handler),e.addEventListener("keyup",o.handlerKey)},updated(e,{value:n,oldValue:o}){n!==o&&(e.__qclosepopup.depth=yt(n))},beforeUnmount(e){const n=e.__qclosepopup;e.removeEventListener("click",n.handler),e.removeEventListener("keyup",n.handlerKey),delete e.__qclosepopup}}),za=fe({__name:"ModifierDisplay",emits:["modify","reset"],setup(e,{emit:n}){const o=n;return(i,t)=>{const a=Zn,r=ge;return R(),K("div",null,[F(r,{round:"",flat:"",dense:"",color:"red","aria-label":"Decrease value",title:"Decrease value",onClick:t[0]||(t[0]=u=>o("modify",-5))},{default:X(()=>[F(a,{name:"line-md:chevron-small-double-left"})]),_:1}),F(r,{round:"",flat:"",dense:"",color:"red","aria-label":"Decrease value",title:"Decrease value",onClick:t[1]||(t[1]=u=>o("modify",-1))},{default:X(()=>[F(a,{name:"line-md:chevron-small-left"})]),_:1}),F(r,{round:"",flat:"",dense:"","aria-label":"Reset value",title:"Reset value",onClick:t[2]||(t[2]=u=>o("reset"))},{default:X(()=>[F(a,{name:"ion:ios-minus-empty"})]),_:1}),F(r,{round:"",flat:"",dense:"",color:"green","aria-label":"Increase value",title:"Increase value",onClick:t[3]||(t[3]=u=>o("modify",1))},{default:X(()=>[F(a,{name:"line-md:chevron-small-right"})]),_:1}),F(r,{round:"",flat:"",dense:"",color:"green","aria-label":"Increase value",title:"Increase value",onClick:t[4]||(t[4]=u=>o("modify",5))},{default:X(()=>[F(a,{name:"line-md:chevron-small-double-right"})]),_:1})])}}}),kt=_e(za,[["__scopeId","data-v-75fd0cf9"]]),Oa=fe({__name:"NumericInput",props:{baseValue:{default:0},modifier:{default:0},direction:{default:"left"}},emits:["update:modelValue"],setup(e,{expose:n,emit:o}){const i=e,t=f(()=>i.baseValue+i.modifier),a=G(i.modifier),r=o;function u(d){const c=typeof d=="string"?Number(d):d??0;a.value=c-i.baseValue,r("update:modelValue",a.value),requestAnimationFrame(()=>{var g;return(g=document.activeElement)==null?void 0:g.blur()})}function h(d){d>0?a.value+=Math.round(Math.max(d,d*i.baseValue/100)):a.value+=Math.round(Math.min(d,d*i.baseValue/100)),r("update:modelValue",a.value)}function l(){v(),r("update:modelValue",a.value)}function s(d){const c=d.target;requestAnimationFrame(()=>c==null?void 0:c.select())}function v(){a.value=0}return n({reset:v}),(d,c)=>{const g=ta,w=La;return R(),ue(w,{"model-value":L(t),dense:"",standout:"custom-behavior",placeholder:d.baseValue,type:"number",debounce:"500","onUpdate:modelValue":u,onFocus:s},gn({append:X(()=>[d.modifier!==0?(R(),ue(g,{key:0,floating:"",color:d.modifier>0?"green":"red"},{default:X(()=>[Ce(se(d.modifier),1)]),_:1},8,["color"])):le("",!0)]),_:2},[d.direction==="right"?{name:"after",fn:X(()=>[F(kt,{onModify:h,onReset:l})]),key:"0"}:void 0,d.direction==="left"?{name:"before",fn:X(()=>[F(kt,{onModify:h,onReset:l})]),key:"1"}:void 0]),1032,["model-value","placeholder"])}}}),ja=_e(Oa,[["__scopeId","data-v-d1dd2184"]]);function Je(e,n){return n.split(".").reduce((o,i)=>o==null?void 0:o[i],e)}function Ha(e,n,o){const i=n.split(".");let t=e;for(let a=0;a<i.length-1;a++){const r=i[a];t[r]??(t[r]={}),t=t[r]}t[i[i.length-1]]=o}function Re(){return Ve.reduce((e,n)=>(e[n]=0,e),{})}const Ve=["health.unit","armor","attack","defense","damage.normal","damage.piercing","damage.bonus_v_large","damage.bonus_v_infantry","resistance.physical","resistance.fire","resistance.ward_save","recruitment_cost","upkeep_cost"],Ka=[{path:"health.unit",color:"green",label:"Health"},{path:"attack",color:"blue",label:"Attack"},{path:"damage.normal",color:"green",label:"Damage Normal"},{path:"damage.piercing",color:"green",label:"Damage Piercing"},{path:"damage.bonus_v_large",color:"green",label:"Bonus V Large"},{path:"damage.bonus_v_infantry",color:"green",label:"Bonus V Infantry"},{path:"defense",color:"red",label:"Defense"},{path:"armor",color:"orange",label:"Armor"},{path:"resistance.physical",color:"pink",label:"Resistance Physical"},{path:"resistance.fire",color:"pink",label:"Resistance Fire"},{path:"resistance.ward_save",color:"pink",label:"Resistance Ward Save"},{path:"recruitment_cost",color:"#B8860B",label:"Recruitment Cost"},{path:"upkeep_cost",color:"#B8860B",label:"Upkeep Cost"}];function ze(e){if(!e.selection.unit)return e;const n=JSON.parse(JSON.stringify(e.selection.unit));for(const o of Object.keys(e.bonus))if(typeof e.bonus[o]=="number"){const i=Je(n,o);Ha(n,o,i+e.bonus[o])}return{selection:{unit:n,version:e.selection.version,faction:e.selection.faction},entityNumber:e.entityNumber}}const Qa=40,Wa=8,Xa=90,Ga=95,Ya=-100,Za=100;function Ja(e,n){var r,u,h,l;const o=e.attack||0,i=n.defense||0,a=((u=(r=n.land_unit)==null?void 0:r.battle_entity)==null?void 0:u.size)!=="small"?((h=e.damage)==null?void 0:h.bonus_v_large)||0:((l=e.damage)==null?void 0:l.bonus_v_infantry)||0;return Math.max(Wa,Math.min(o-i+Qa+a,Xa))/100}function eo(e,n){var h,l,s,v,d,c;const i=((l=(h=n.land_unit)==null?void 0:h.battle_entity)==null?void 0:l.size)!=="small"?((s=e.damage)==null?void 0:s.bonus_v_large)||0:((v=e.damage)==null?void 0:v.bonus_v_infantry)||0,t=((d=e.damage)==null?void 0:d.normal)||0,a=((c=e.damage)==null?void 0:c.piercing)||0,r=t/(t+a),u=n.armor||0;return(t+i*r)*(1-Math.min(u*.75*.01,1))+a+i*(1-r)}function to(e,n){var u,h,l,s,v;const o=((u=n.resistance)==null?void 0:u.ward_save)||0,i=((h=n.resistance)==null?void 0:h.physical)||0,t=((l=n.resistance)==null?void 0:l.fire)||0,a=((s=e.damage)==null?void 0:s.is_magical)||!1,r=((v=e.damage)==null?void 0:v.is_fire)||!1;return Math.min(Ga,o+(a?0:Math.max(i,0))+(r?Math.min(Math.max(t,Ya),Za):0))/100}function wt(e,n){var a;const o=Ja(e,n),i=to(e,n);return o*(1-i)*eo(e,n)/(((a=n.health)==null?void 0:a.unit)||0)}function Ae(e){return["Hero","Lord"].includes(e.caste)?1:e.land_unit.num_engines>0?e.land_unit.num_engines:e.num_men}const no=["upkeep_cost","recruitment_cost","multiplayer_cost"];function ao(e,n,o){const i=e.selection.unit,t=n.selection.unit;if(!i||!t)return 0;const a=Math.min(1,Math.max(0,o)),r=[];for(const h of no){const l=i[h],s=t[h];if(typeof l=="number"&&typeof s=="number"){const v=s,d=(1-a)*l;if(d>0){const c=v/d;r.push(c)}}}return r.length===0?0:r.reduce((h,l)=>h+l,0)/r.length}function oo(e,n){const o=wt(e.selection.unit,n.selection.unit)*Math.min(Ae(e.selection.unit),e.entityNumber),i=wt(n.selection.unit,e.selection.unit)*Math.min(Ae(n.selection.unit),n.entityNumber);function t(a,r,u){const h=1/r,s=1-h*u;return{winner:a,hitsNeeded:h,remainingHealth:s}}return o>i?t("left",o,i):i>o?t("right",i,o):t("left",o,i)}const Oe=Pt("unit",{state:()=>({left:null,right:null}),actions:{setUnit(e,n){n?(this[e]=n,this[e].bonus=Re()):this[e]=null},setUnitBonus(e,n){this[e]&&(n?this[e].bonus=n:this[e].bonus=Re())},setUnitEntityCount(e,n){this[e]&&(this[e].entityNumber=n)},clearUnits(){this.left=null,this.right=null}},getters:{combatResult(){var e,n;return!((e=this.left)!=null&&e.selection.unit)||!((n=this.right)!=null&&n.selection.unit)?null:oo(ze(this.left),ze(this.right))}},persist:{storage:_n.localStorage()}}),io={class:"short-summary"},lo={key:0,class:"combat-result"},ro={class:"winner-section"},so={class:"hits-info"},uo={class:"health-display"},co={key:0,class:"gold-efficiency"},vo={class:"gold-value"},fo={key:1,class:"no-combat"},mo=fe({__name:"ShortSummary",setup(e){const n=Oe(),o=f(()=>n.combatResult),i=f(()=>{var s,v,d;if(!o.value)return"";const l=o.value.winner==="left"?(s=n.left)==null?void 0:s.selection.unit:(v=n.right)==null?void 0:v.selection.unit;return((d=l==null?void 0:l.land_unit)==null?void 0:d.onscreen_name)||"Unknown Unit"}),t=f(()=>{var s,v,d;if(!o.value)return"";const l=o.value.winner==="left"?(s=n.right)==null?void 0:s.selection.unit:(v=n.left)==null?void 0:v.selection.unit;return((d=l==null?void 0:l.land_unit)==null?void 0:d.onscreen_name)||"Unknown Unit"}),a=f(()=>{var l;return((l=o.value)==null?void 0:l.winner)==="left"?"text-positive":"text-negative"}),r=f(()=>{var l;return((l=o.value)==null?void 0:l.winner)==="left"?"bg-negative":"bg-positive"}),u=f(()=>{var s;const l=(((s=o.value)==null?void 0:s.remainingHealth)||0)*100;return l>=80?"green":l>=60?"light-green":l>=40?"orange":l>=20?"deep-orange":"red"}),h=f(()=>{if(!o.value||!n.left||!n.right)return null;const l=o.value.winner==="left"?n.left:n.right,s=o.value.winner==="left"?n.right:n.left,v=o.value.remainingHealth;return ao(ze(l),ze(s),v)});return(l,s)=>{const v=wa;return R(),K("div",io,[o.value?(R(),K("div",lo,[A("div",ro,[A("p",null,[A("span",{class:qe(["winner-title text-emphasized",a.value])},se(i.value),3),s[0]||(s[0]=Ce(" wins! "))]),A("p",so,[Ce(" Takes "+se(o.value.hitsNeeded.toFixed(1))+" hits to defeat ",1),A("span",{class:qe(["loser-name text-emphasized",r.value])},se(t.value),3),s[1]||(s[1]=Ce(", with "))])]),A("div",uo,[F(v,{"show-value":"",value:o.value.remainingHealth*100,size:"70px",thickness:.22,color:u.value,"track-color":"grey-3",class:"q-ma-md"},{default:X(()=>[Ce(se((o.value.remainingHealth*100).toFixed(1))+"% ",1)]),_:1},8,["value","color"]),s[2]||(s[2]=A("span",{class:"health-label"},"Remaining Health",-1))]),h.value!==null?(R(),K("p",co,[s[3]||(s[3]=Ce(" Gold Efficiency: ")),A("span",vo,se(h.value.toFixed(2)),1)])):le("",!0)])):(R(),K("div",fo,s[4]||(s[4]=[A("p",null,"Select two units to see combat results",-1)])))])}}}),go=_e(mo,[["__scopeId","data-v-3d229481"]]),pe="https://res.cloudinary.com/fishofstone/image/upload/twwstats/api",_o="ui/skins/default/icon_cross.webp",ho="mon_64.webp";function et(e,n){let o=`${pe}/${e}`;if(n.general_portrait&&n.general_portrait.length>0){const i=n.general_portrait.replace("portholes","units").replace(".png",".webp");o+=`/${i}`}else n.unit_card_url?o+=`/ui/units/icons/${n.unit_card_url}.webp`:n.unit&&(o+=`/ui/units/icons/${n.unit}.webp`);return o}function St(e,n){let o=`${pe}/${e}`;return o+=`/ui/common ui/unit_category_icons/${n.icon}.webp`,o}function Ct(e,n){let o=`${pe}/${e}/ui/skins/default/unit_card_semicircle`;return n.special_categories&&(["Lord","Hero"].includes(n.caste)?o+="_hero":n.special_categories.includes("blessed_spawnings")?o+="_spawning":n.special_categories.includes("elector_counts")?o+="_elector":n.special_categories.includes("renown")&&(o+="_renown")),o+=".webp",o}function po(e){return`${pe}/${e}/ui/skins/default/unit_card_frame_plain.webp`}function bo(e){return`${pe}/${e}/ui/skins/default/unit_card_hover.webp`}const yo=["src","alt"],ko=["src","alt"],wo=["src","alt"],So=["src"],Co=["src"],xo=fe({__name:"UnitPortrait",props:{selected:{type:[Boolean,null],default:!1},versionId:{},unit:{}},setup(e){return(n,o)=>{var i,t,a;return R(),K("div",{class:qe(["unit-portrait",{selected:n.selected}])},[L(et)(n.versionId,n.unit)?(R(),K("img",{key:0,src:L(et)(n.versionId,n.unit),alt:((i=n.unit.land_unit)==null?void 0:i.onscreen_name)||n.unit.unit},null,8,yo)):le("",!0),L(Ct)(n.versionId,n.unit)?(R(),K("img",{key:1,src:L(Ct)(n.versionId,n.unit),alt:((t=n.unit.land_unit)==null?void 0:t.onscreen_name)||n.unit.unit},null,8,ko)):le("",!0),L(St)(n.versionId,n.unit)?(R(),K("img",{key:2,src:L(St)(n.versionId,n.unit),alt:((a=n.unit.land_unit)==null?void 0:a.onscreen_name)||n.unit.unit},null,8,wo)):le("",!0),A("img",{src:L(po)(n.versionId)},null,8,So),A("img",{src:L(bo)(n.versionId),class:"unit-hover"},null,8,Co)],2)}}}),qo=_e(xo,[["__scopeId","data-v-c4f09404"]]);async function Gt(e,n,o){var i,t,a,r,u,h,l,s,v,d,c,g,w,$,V,x,B,C,M,z,I,Q,k,m,q,_,p,b,U,P,T,J,te,H,Y,y,j,E,Z,W,ie,we;if(!n||!o)throw new Error("ID de version et cl d'unit requis");try{const ce=await e.query({tww:{__args:{tww_version:n},unit:{__args:{id:o},unit:!0,caste:!0,num_men:!0,recruitment_cost:!0,upkeep_cost:!0,multiplayer_cost:!0,land_unit:{onscreen_name:!0,bonus_hit_points:!0,num_engines:!0,num_mounts:!0,battle_entity:{hit_points:!0,size:!0,type:!0},articulated_vehicle_entity:{hit_points:!0},engine:{battle_entity:{hit_points:!0,type:!0}},mount:{battle_entity:{hit_points:!0}},armour:{armour_value:!0},primary_melee_weapon:{damage:!0,ap_damage:!0,bonus_v_large:!0,bonus_v_infantry:!0,melee_attack_interval:!0,is_magical:!0,ignition_amount:!0},melee_attack:!0,melee_defence:!0,damage_mod_physical:!0,damage_mod_flame:!0,damage_mod_all:!0,variant:{unit_card_url:!0}},battle_mounts:{base_unit:!0,mounted_unit:!0,icon_name:!0,mount_name:!0},custom_battle_permissions:{general_portrait:!0},ui_unit_group:{icon:!0,parent_group:{onscreen_name:!0}},unit_sets:{special_category:!0}}}});if(!((i=ce==null?void 0:ce.tww)!=null&&i.unit))return null;const D=ce.tww.unit;return!D||typeof D.unit!="string"||typeof D.caste!="string"||typeof D.num_men!="number"||!D.land_unit?null:{version:n,unit:D.unit,caste:D.caste,num_men:D.num_men,recruitment_cost:Number(D.recruitment_cost||0),upkeep_cost:Number(D.upkeep_cost||0),multiplayer_cost:Number(D.multiplayer_cost||0),land_unit:{num_engines:D.land_unit.num_engines||0,num_mounts:D.land_unit.num_mounts||0,onscreen_name:((t=D.land_unit)==null?void 0:t.onscreen_name)||"",bonus_hit_points:Number(((a=D.land_unit)==null?void 0:a.bonus_hit_points)||0),battle_entity:{hit_points:Number(((u=(r=D.land_unit)==null?void 0:r.battle_entity)==null?void 0:u.hit_points)||0),size:((l=(h=D.land_unit)==null?void 0:h.battle_entity)==null?void 0:l.size)||"small",type:((v=(s=D.land_unit)==null?void 0:s.battle_entity)==null?void 0:v.type)||""}},battle_mounts:(D.battle_mounts||[]).filter(ve=>ve!==null).map(ve=>({base_unit:ve.base_unit||"",mounted_unit:ve.mounted_unit||"",icon_name:ve.icon_name||"",mount_name:ve.mount_name||""})),health:{unit:zn(D),entity:Math.round(((c=(d=D.land_unit)==null?void 0:d.battle_entity)==null?void 0:c.hit_points)||0)},armor:Number(((w=(g=D.land_unit)==null?void 0:g.armour)==null?void 0:w.armour_value)||0),attack:Number((($=D.land_unit)==null?void 0:$.melee_attack)||0),defense:Number(((V=D.land_unit)==null?void 0:V.melee_defence)||0),attack_interval:Number(((B=(x=D.land_unit)==null?void 0:x.primary_melee_weapon)==null?void 0:B.melee_attack_interval)||0),damage:{normal:Number(((M=(C=D.land_unit)==null?void 0:C.primary_melee_weapon)==null?void 0:M.damage)||0),piercing:Number(((I=(z=D.land_unit)==null?void 0:z.primary_melee_weapon)==null?void 0:I.ap_damage)||0),is_magical:!!((k=(Q=D.land_unit)==null?void 0:Q.primary_melee_weapon)!=null&&k.is_magical),is_fire:Number(((q=(m=D.land_unit)==null?void 0:m.primary_melee_weapon)==null?void 0:q.ignition_amount)||0)>0,bonus_v_large:Number(((p=(_=D.land_unit)==null?void 0:_.primary_melee_weapon)==null?void 0:p.bonus_v_large)||0),bonus_v_infantry:Number(((U=(b=D.land_unit)==null?void 0:b.primary_melee_weapon)==null?void 0:U.bonus_v_infantry)||0)},resistance:{physical:Number(((P=D.land_unit)==null?void 0:P.damage_mod_physical)||0),fire:Number(((T=D.land_unit)==null?void 0:T.damage_mod_flame)||0),ward_save:Number(((J=D.land_unit)==null?void 0:J.damage_mod_all)||0)},is_large:((H=(te=D.land_unit)==null?void 0:te.battle_entity)==null?void 0:H.size)!=="small",icon:((Y=D.ui_unit_group)==null?void 0:Y.icon)||"",general_portrait:((j=(y=D.custom_battle_permissions)==null?void 0:y[0])==null?void 0:j.general_portrait)||"",group:((Z=(E=D.ui_unit_group)==null?void 0:E.parent_group)==null?void 0:Z.onscreen_name)||"",unit_card_url:((ie=(W=D.land_unit)==null?void 0:W.variant)==null?void 0:ie.unit_card_url)||"",special_categories:Array.from(new Set((we=D.unit_sets)==null?void 0:we.map(ve=>ve==null?void 0:ve.special_category)))||[]}}catch(ce){throw console.error("Erreur lors de la rcupration de l'unit:",ce),ce}}function xt(e,n){if(!(!e||!(n!=null&&n.flags_url)))return`${pe}/${e}/${n.flags_url}/${ho}`}function qt(e,n){return`${pe}/${e}/${n.replace(/\.png/,".webp")}`}function $o(e){return`${pe}/${e}/ui/skins/default/fe_frame_glow.webp`}function Mo(e){return`${pe}/${e}/ui/skins/default/build_city_chain_frame.webp`}const Bo=["src"],No=["src"],Uo=["src","alt"],Vo={class:"label"},Po=fe({__name:"SquarePortrait",props:{versionId:{default:"7020588859072995689"},imageUrl:{default:""},label:{},selected:{type:Boolean,default:!1}},setup(e){return(n,o)=>(R(),K("div",{class:qe(["container",{selected:n.selected}])},[A("img",{src:L($o)(n.versionId)},null,8,Bo),A("img",{src:L(Mo)(n.versionId),class:"square-hover"},null,8,No),hn(n.$slots,"default",{},()=>[n.imageUrl?(R(),K("img",{key:0,src:n.imageUrl,alt:n.label,class:"item-card__image",fit:"contain"},null,8,Uo)):le("",!0)]),A("div",Vo,se(n.label),1)],2))}}),$t=_e(Po,[["__scopeId","data-v-f11b5fcc"]]);function Ro(e){return`${pe}/${e.id}/ui/skins/default/fe_logo.webp`}const Ao=Pt("memory",{state:()=>({last_version:null}),actions:{setLastVersion(e){this.last_version=e},clearSession(){this.last_version=null}},persist:{storage:sessionStorage,key:"tww3-brawl-memory"}}),Eo={class:"row items-center q-gutter-x-sm"},Io={class:"q-mb-md"},To={key:0,class:"version-icons-row"},Fo=["src","alt"],Lo={class:"q-mb-md"},Do={key:0,class:"faction-icons-row"},zo=["src","alt"],Oo={class:"q-mb-md"},jo={key:0},Ho={class:"group-label"},Ko={class:"unit-icons-row"},Qo=["onClick"],Wo={class:"unit-label"},Xo={key:1},Go=fe({__name:"SelectUnit",props:{unitSelection:{},version:{}},emits:["update:unitSelection","update:version"],setup(e,{emit:n}){const o=G(null),i=G("version"),t=G(!1),a=Ao(),r=n,u=G(null),h=f({get:()=>{var p;return(p=u.value)!=null&&p.version?u.value.version:a.last_version},set:p=>{a.setLastVersion(p),u.value?u.value.version=p:p&&(u.value={unit:void 0,version:p,faction:void 0})}}),l=f({get:()=>{var p;return((p=u.value)==null?void 0:p.faction)||null},set:p=>{u.value?u.value.faction=p:p&&(u.value={unit:void 0,version:void 0,faction:p})}}),s=f({get:()=>{var p;return((p=u.value)==null?void 0:p.unit)||null},set:p=>{u.value?u.value.unit=p:p&&(u.value={unit:p,version:void 0,faction:void 0})}}),{data:v,isLoading:d}=jt(),c=f(()=>v.value?(console.log(v.value),v.value):[]),g=f(()=>{var p,b;return((b=(p=u.value)==null?void 0:p.version)==null?void 0:b.id)??""}),{data:w,isLoading:$,refetch:V}=On(g),x=f(()=>w.value?w.value:[]),B=f(()=>{var p,b;return((b=(p=u.value)==null?void 0:p.faction)==null?void 0:b.key)??""}),{data:C,isLoading:M,refetch:z}=jn(g,B);f(()=>C.value?C.value.map(p=>{var b;return{label:((b=p.land_unit)==null?void 0:b.onscreen_name)||p.unit,value:p.unit}}):[]);const I=f(()=>{var T;if(!C.value)return{};const p={};for(const J of C.value){const te=J.group||"Autres";p[te]||(p[te]=[]),p[te].push(J)}const b={};for(const[J,te]of Object.entries(p)){const H={};for(const y of te){const j=((T=y.land_unit)==null?void 0:T.onscreen_name)||y.unit;H[j]||(H[j]=[]),H[j].push(y)}const Y=[];for(const y in H){const j=H[y].sort((E,Z)=>{const W=E.recruitment_cost||0,ie=Z.recruitment_cost||0;return W-ie})[0];Y.push(j)}Y.sort((y,j)=>{var we,ce;const E=y.recruitment_cost||0,Z=j.recruitment_cost||0;if(E!==Z)return E-Z;const W=((we=y.land_unit)==null?void 0:we.onscreen_name)||y.unit,ie=((ce=j.land_unit)==null?void 0:ce.onscreen_name)||j.unit;return W.localeCompare(ie)}),b[J]=Y}const U=["Lords","Heroes","Infantry","Missile Infantry","Cavalry & Chariots","Missile Cavalry & Chariots","Artillery & War Machines"],P={};for(const J of U)b[J]&&(P[J]=b[J]);for(const[J,te]of Object.entries(b))U.includes(J)||(P[J]=te);return P});oe(t,async p=>{p&&(!u.value||!u.value.unit)&&a.last_version&&(h.value=a.last_version,i.value="faction",await V())}),oe(i,async p=>{p==="version"?u.value&&(u.value.faction=void 0,u.value.unit=void 0):p==="faction"?(await V(),u.value&&(u.value.unit=void 0)):p==="unit"&&await z()});const Q=()=>{i.value==="version"&&h.value?(l.value=void 0,s.value=void 0,i.value="faction"):i.value==="faction"&&l.value&&(s.value=void 0,i.value="unit")},k=()=>{i.value==="unit"?(s.value=void 0,i.value="faction"):i.value==="faction"&&(l.value=void 0,i.value="version")},m=p=>{h.value=p,i.value="faction"},q=p=>{l.value=p,i.value="unit"},_=p=>{s.value=p,u.value&&(t.value=!1,r("update:unitSelection",u.value))};return(p,b)=>{const U=ge,P=Kn,T=ba,J=Ot,te=pa,H=lt,Y=la,y=it,j=Hn;return R(),K("div",Eo,[F(U,{label:"Pick a Unit",color:"primary",onClick:b[0]||(b[0]=E=>t.value=!0)}),F(j,{modelValue:t.value,"onUpdate:modelValue":b[6]||(b[6]=E=>t.value=E)},{default:X(()=>[F(y,{class:"custom"},{default:X(()=>[F(H,{class:"q-card-section-custom"},{default:X(()=>[F(te,{ref_key:"carouselRef",ref:o,padding:!1,modelValue:i.value,"onUpdate:modelValue":b[3]||(b[3]=E=>i.value=E),autoplay:!1,"transition-prev":"slide-left","transition-next":"slide-right","aria-hidden":"true",class:"q-carousel-custom"},{default:X(()=>[F(T,{name:"version",key:"version"},{default:X(()=>[A("div",Io,[F(P,{modelValue:h.value,"onUpdate:modelValue":b[1]||(b[1]=E=>h.value=E),options:c.value,loading:L(d),label:"Versions",dense:"",outlined:"","option-label":"name","option-value":"id"},null,8,["modelValue","options","loading"]),L(v)&&i.value==="version"?(R(),K("div",To,[L(v)&&i.value==="version"?(R(!0),K(me,{key:0},be(L(v),E=>(R(),ue($t,{key:E.id,label:E.name,selected:h.value&&h.value.id===E.id||!1,onClick:Z=>m(E)},{default:X(()=>[A("img",{src:L(Ro)(E),class:"square-icon-image",alt:E.name},null,8,Fo)]),_:2},1032,["label","selected","onClick"]))),128)):le("",!0)])):le("",!0)])]),_:1}),F(T,{name:"faction",key:"faction"},{default:X(()=>[A("div",Lo,[F(P,{modelValue:l.value,"onUpdate:modelValue":b[2]||(b[2]=E=>l.value=E),options:x.value,loading:L($),disable:!h.value||L($),label:"Faction",dense:"",outlined:"","option-label":"screen_name","option-value":"key"},null,8,["modelValue","options","loading","disable"]),L(w)&&i.value==="faction"?(R(),K("div",Do,[(R(!0),K(me,null,be(L(w),E=>{var Z;return R(),ue($t,{key:E.key,label:((Z=E.subculture)==null?void 0:Z.name)||E.key,selected:l.value&&l.value.key===E.key||!1,onClick:W=>q(E)},{default:X(()=>[L(xt)(g.value,E)?(R(),K("img",{key:0,src:L(xt)(g.value,E),alt:E.screen_name||E.key},null,8,zo)):le("",!0)]),_:2},1032,["label","selected","onClick"])}),128))])):le("",!0)])]),_:1}),F(T,{name:"unit",key:"unit"},{default:X(()=>[A("div",Oo,[L(C)&&Object.keys(I.value).length>0?(R(),K("div",jo,[(R(!0),K(me,null,be(I.value,(E,Z)=>(R(),K("div",{key:Z,class:"unit-group-block"},[A("div",Ho,se(Z),1),A("div",Ko,[(R(!0),K(me,null,be(E,W=>{var ie;return R(),K("div",{key:W.unit,class:"unit-icon-container",onClick:we=>_(W)},[F(qo,{versionId:g.value,unit:W,selected:s.value&&s.value.unit===W.unit},null,8,["versionId","unit","selected"]),A("div",Wo,se(((ie=W.land_unit)==null?void 0:ie.onscreen_name)||W.unit),1)],8,Qo)}),128))])]))),128))])):(R(),K("div",Xo,[F(J,{color:"primary"})]))])]),_:1})]),_:1},8,["modelValue"])]),_:1}),F(Y,{class:"text-primary q-card-actions-custom",align:"between"},{default:X(()=>[i.value==="version"?(R(),ue(U,{key:0,label:"Fermer",flat:"",dense:"",onClick:b[4]||(b[4]=E=>t.value=!1)})):(R(),ue(U,{key:1,label:"Back",flat:"",dense:"",onClick:k})),i.value!=="unit"?(R(),ue(U,{key:2,disable:i.value==="version"&&!h.value||i.value==="faction"&&!l.value,label:"Next",color:"primary",flat:"",dense:"",onClick:Q},null,8,["disable"])):(R(),ue(U,{key:3,disable:!s.value||!h.value||!l.value,label:"Finish",color:"primary",flat:"",dense:"",onClick:b[5]||(b[5]=()=>{t.value=!1,u.value&&r("update:unitSelection",u.value)})},null,8,["disable"]))]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),Yo=_e(Go,[["__scopeId","data-v-fc56ebd3"]]);function Zo(e,n,o){const i=Ht();return Qn({queryKey:["tww","versions",e,"units",n],queryFn:()=>Gt(i,e.value,n.value),staleTime:30*60*1e3,enabled:!!e.value&&!!n.value})}const Jo={class:"row items-center"},ei=["src"],ti=["src"],ni=fe({__name:"MountPicker",props:{unit:{}},emits:["update:unit"],setup(e,{emit:n}){const o=e,i=n,t=f(()=>{var g;return(g=r.value.find(w=>w.mounted_unit===o.unit.unit))==null?void 0:g.icon_name}),a=G(null),r=f(()=>{const g=o.unit.battle_mounts;if(g.length>0){const w={base_unit:g[0].base_unit,mounted_unit:g[0].base_unit,icon_name:_o,mount_name:"On Foot"};return[...g,w]}return[]}),u=f(()=>o.unit.version),h=f(()=>a.value||""),{data:l,isLoading:s,error:v,refetch:d}=Zo(u,h);oe(a,async g=>{g!==null&&(await d(),l.value&&i("update:unit",l.value))},{immediate:!0});function c(g){const w=g.mounted_unit;w!==o.unit.unit&&(a.value=w)}return(g,w)=>{const $=Jn,V=Xn,x=Wn,B=ia,C=Da;return R(),K("div",Jo,[F(B,null,{default:X(()=>[F(x,null,{default:X(()=>[(R(!0),K(me,null,be(r.value,M=>pn((R(),ue(V,{key:M.mounted_unit,onClick:z=>c(M),clickable:""},{default:X(()=>[F($,null,{default:X(()=>[A("img",{src:L(qt)(g.unit.version,M.icon_name)},null,8,ei)]),_:2},1024),Ce(" "+se(M.mount_name),1)]),_:2},1032,["onClick"])),[[C]])),128))]),_:1})]),_:1}),F($,null,{default:X(()=>[A("img",{src:L(qt)(g.unit.version,t.value||"")},null,8,ti)]),_:1})])}}});function ai(e){let n="https://twwstats.com/unitscards?";const o=e.map(i=>"units=f"+encodeURIComponent(`=0&k=${i.unit.unit}&v=${i.version.id}&m&r=0`)).join("&");return n+o}const oi={class:"unit-label text-xl"},ii=["href"],li={class:"q-mt-md row justify-between"},ri=fe({__name:"index",props:{orientation:{default:"left"},modelValue:{}},emits:["update:modelValue"],setup(e,{emit:n}){const o=Oe(),i=f(()=>{var d;return((d=a.modelValue)==null?void 0:d.selection)||null}),t=G(null),a=e,r=n;function u(d){const c=d.num_men||1,g=Math.min(15,c);a.modelValue&&(a.modelValue.selection.unit=d,r("update:modelValue",{unitWithEntityNumberAndBonus:{selection:a.modelValue.selection,entityNumber:g,bonus:a.modelValue.bonus},mount_changed:!0}))}function h(d){const c=Ae(d.unit),g=Math.min(15,c);r("update:modelValue",{unitWithEntityNumberAndBonus:{selection:d,entityNumber:g,bonus:Re()},mount_changed:!1})}const l=f(()=>{var d,c,g;return(g=(c=(d=i.value)==null?void 0:d.unit)==null?void 0:c.land_unit)!=null&&g.onscreen_name?i.value.unit.land_unit.onscreen_name:"Unit Title"}),s=f(()=>{var d,c,g;if((d=i.value)!=null&&d.unit&&((g=(c=i.value)==null?void 0:c.version)!=null&&g.id)){const w=et(i.value.version.id,i.value.unit);if(w)return w}return"/default-unit-image.jpg"}),v=f(()=>{var c,g,w,$,V,x,B,C,M,z,I,Q,k;let d=[];return(c=i.value)!=null&&c.unit&&((w=(g=i.value)==null?void 0:g.version)!=null&&w.id)&&d.push({unit:i.value.unit,version:i.value.version}),a.orientation==="left"&&((V=($=o.right)==null?void 0:$.selection)!=null&&V.unit)&&((C=(B=(x=o.right)==null?void 0:x.selection)==null?void 0:B.version)!=null&&C.id)&&d.push({unit:o.right.selection.unit,version:o.right.selection.version}),a.orientation==="right"&&((z=(M=o.left)==null?void 0:M.selection)!=null&&z.unit)&&((k=(Q=(I=o.left)==null?void 0:I.selection)==null?void 0:Q.version)!=null&&k.id)&&d.push({unit:o.left.selection.unit,version:o.left.selection.version}),ai(d)});return(d,c)=>{const g=Ea,w=lt,$=it;return R(),ue($,{class:"unit-card"},{default:X(()=>[F(w,null,{default:X(()=>[F(g,{src:s.value,ratio:16/9,fit:"contain",class:"unit-image",alt:"Unit Portrait"},null,8,["src"]),A("div",oi,[v.value?(R(),K("a",{key:0,href:v.value,target:"_blank"},se(l.value),9,ii)):le("",!0)])]),_:1}),F(w,{class:qe([d.orientation,"card-section"])},{default:X(()=>{var V,x,B,C,M,z;return[A("div",li,[F(Yo,{unitSelection:i.value,version:L(t),"onUpdate:unitSelection":c[0]||(c[0]=I=>h(I)),"onUpdate:version":c[1]||(c[1]=I=>t.value=I)},null,8,["unitSelection","version"]),(B=(x=(V=i.value)==null?void 0:V.unit)==null?void 0:x.battle_mounts)!=null&&B.length&&((z=(M=(C=i.value)==null?void 0:C.unit)==null?void 0:M.battle_mounts)==null?void 0:z.length)>0?(R(),ue(ni,{key:0,unit:i.value.unit,"onUpdate:unit":c[2]||(c[2]=I=>u(I))},null,8,["unit"])):le("",!0)])]}),_:1},8,["class"])]),_:1})}}}),si=_e(ri,[["__scopeId","data-v-f08ff1fb"]]),ui={key:0,class:"col-6"},ci={class:"text-caption q-mb-xs"},di={class:"q-mt-md"},vi={class:"row q-gutter-xs"},fi=fe({__name:"EntitySliders",props:{entityNumber:{},maxEntities:{}},emits:["update:entityNumber"],setup(e,{emit:n}){const o=n,i=[6,10,14,20],t=a=>{a!==null&&o("update:entityNumber",a)};return(a,r)=>{const u=Ua,h=ge,l=lt,s=it;return a.maxEntities>1?(R(),K("div",ui,[F(s,null,{default:X(()=>[F(l,null,{default:X(()=>[A("div",ci," Active entities: "+se(a.entityNumber),1),F(u,{"model-value":a.entityNumber,"onUpdate:modelValue":t,min:1,max:a.maxEntities,step:1,label:"","label-always":""},null,8,["model-value","max"]),A("div",di,[r[0]||(r[0]=A("div",{class:"text-caption q-mb-xs"},"Quick select:",-1)),A("div",vi,[(R(),K(me,null,be(i,v=>F(h,{key:v,label:v.toString(),color:a.entityNumber===v?"primary":"grey-6",outline:a.entityNumber!==v,size:"sm",onClick:d=>t(v),disable:v>a.maxEntities},null,8,["label","color","outline","onClick","disable"])),64))])])]),_:1})]),_:1})])):le("",!0)}}}),mi=_e(fi,[["__scopeId","data-v-95171e5f"]]),gi=fe({__name:"ValueDisplay",props:{value:{type:[Number,Boolean]},isUpdatable:{type:Boolean},bonus:{default:0},orientation:{}},emits:["update"],setup(e,{expose:n,emit:o}){const i=o;function t(l){r.value=l,i("update",r.value)}const r=G(e.bonus),u=G(null);function h(){var l;r.value=0,(l=u.value)==null||l.reset()}return n({reset:h}),(l,s)=>(R(),K("div",{class:qe(["container",{reverse:l.orientation==="right"}])},[A("div",{class:qe(["left base",{right:l.orientation==="right"}])},[typeof l.value=="number"&&l.isUpdatable?(R(),ue(ja,{key:0,ref_key:"numericInputRef",ref:u,modifier:r.value,baseValue:l.value,"onUpdate:modelValue":t,direction:l.orientation},null,8,["modifier","baseValue","direction"])):(R(),K(me,{key:1},[Ce(se(l.value),1)],64))],2)],2))}}),Mt=_e(gi,[["__scopeId","data-v-14341811"]]),_i={scope:"col",class:"text-right unit-column"},hi={scope:"col",class:"text-left unit-column"},pi={scope:"col",class:"unit-column"},bi={scope:"col",class:"unit-column"},yi={key:0,class:"unit-column"},ki={class:"text-center stat-column"},wi={key:1,class:"unit-column"},Si=fe({__name:"index",props:{leftUnit:{},rightUnit:{}},emits:["update"],setup(e,{expose:n,emit:o}){const i=e,t=o;function a(s,v,d){t("update",s,v,d)}const r=G([]),u=G([]);function h(s){l(s);for(const v of Ve)t("update",s,v,0);s==="left"?i.leftUnit&&(i.leftUnit.bonus=Re()):i.rightUnit&&(i.rightUnit.bonus=Re())}function l(s){s==="left"?u.value.forEach(v=>v==null?void 0:v.reset()):r.value.forEach(v=>v==null?void 0:v.reset())}return n({reset:l}),(s,v)=>{var g,w,$,V;const d=ge,c=Gn;return(w=(g=s.leftUnit)==null?void 0:g.selection)!=null&&w.unit&&((V=($=s.rightUnit)==null?void 0:$.selection)!=null&&V.unit)?(R(),ue(c,{key:0,separator:"none",flat:"",bordered:""},{default:X(()=>{var x,B,C,M,z,I,Q,k;return[A("thead",null,[A("tr",null,[A("th",_i,[A("b",null,se((M=(C=(B=(x=s.leftUnit)==null?void 0:x.selection)==null?void 0:B.unit)==null?void 0:C.land_unit)==null?void 0:M.onscreen_name),1)]),v[2]||(v[2]=A("th",{scope:"col",class:"text-center stat-column"},[A("b",null,"Statistic")],-1)),A("th",hi,[A("b",null,se((k=(Q=(I=(z=s.rightUnit)==null?void 0:z.selection)==null?void 0:I.unit)==null?void 0:Q.land_unit)==null?void 0:k.onscreen_name),1)])]),A("tr",null,[A("th",pi,[F(d,{label:"Reset",color:"warning",icon:"refresh",onClick:v[0]||(v[0]=m=>h("left"))})]),v[3]||(v[3]=A("th",{scope:"col",class:"stat-column"},null,-1)),A("th",bi,[F(d,{label:"Reset",color:"warning",icon:"refresh",onClick:v[1]||(v[1]=m=>h("right"))})])])]),A("tbody",null,[(R(!0),K(me,null,be(L(Ka),m=>{var q,_,p,b;return R(),K("tr",{key:m.path},[(_=(q=s.leftUnit)==null?void 0:q.selection)!=null&&_.unit?(R(),K("td",yi,[F(Mt,{ref_for:!0,ref_key:"leftUnitRef",ref:u,value:L(Je)(s.leftUnit.selection.unit,m.path),bonus:s.leftUnit.bonus[m.path],isUpdatable:L(Ve).includes(m.path),onUpdate:U=>a("left",m.path,U),orientation:"left"},null,8,["value","bonus","isUpdatable","onUpdate"])])):le("",!0),A("td",ki,se(m.label),1),(b=(p=s.rightUnit)==null?void 0:p.selection)!=null&&b.unit?(R(),K("td",wi,[F(Mt,{ref_for:!0,ref_key:"rightUnitRef",ref:r,value:L(Je)(s.rightUnit.selection.unit,m.path),bonus:s.rightUnit.bonus[m.path],isUpdatable:L(Ve).includes(m.path),onUpdate:U=>a("right",m.path,U),orientation:"right"},null,8,["value","bonus","isUpdatable","onUpdate"])])):le("",!0)])}),128))])]}),_:1})):le("",!0)}}}),Ci=_e(Si,[["__scopeId","data-v-4724c2a2"]]);function xi(){const e=bn(),n=yn(),o=Oe(),{data:i,isLoading:t}=jt(),a=Yn(),r=Ht();function u(c){var w,$;if(!((w=c==null?void 0:c.selection)!=null&&w.unit)||!(($=c==null?void 0:c.selection)!=null&&$.version))return null;const g=[`${c.selection.unit.unit}`,`${c.selection.version.id}`];for(const V of Ve){const x=c.bonus[V];x!==void 0&&x!==0&&g.push(`${V}=${x}`)}return g.join("|")}function h(c){if(!c||typeof c!="string")return null;const g=c.split("|");if(g.length<2)return null;const[w,$,...V]=g;if(!w||!$)return null;const x=Re();for(const B of V){const[C,M]=B.split("=");if(C&&M!==void 0){const z=Number.parseFloat(M);!Number.isNaN(z)&&Ve.includes(C)&&(x[C]=z)}}return{unit_id:w,version:$,bonus:x}}function l(){const c=u(o.left),g=u(o.right),w={};c&&(w.left=c),g&&(w.right=g),n.replace({query:w})}async function s(c){const g=Array.isArray(c)?c[0]:c,w=h(g);if(!w||!i.value)return null;const $=i.value.find(x=>x.id===w.version);if(!$)return null;const V=["tww","versions",w.version,"units",w.unit_id];try{const x=await a.fetchQuery({queryKey:V,queryFn:()=>Gt(r,w.version,w.unit_id),staleTime:18e5});if(!x)return null;const B=Ae(x),C=Math.min(15,B);return{selection:{unit:x,version:$,faction:void 0},entityNumber:C,bonus:w.bonus}}catch(x){return console.error("Error loading unit from URL:",x),null}}async function v(){const c=e.query.left,g=e.query.right;if(t.value&&await new Promise(w=>{const $=oe(t,V=>{V||($(),w())})}),!!i.value){if(c){const w=await s(c);w&&o.setUnit("left",w)}if(g){const w=await s(g);w&&o.setUnit("right",w)}}}function d(){oe(()=>{var c,g,w,$,V,x,B,C,M,z,I,Q,k,m;return[(w=(g=(c=o.left)==null?void 0:c.selection)==null?void 0:g.unit)==null?void 0:w.unit,(x=(V=($=o.left)==null?void 0:$.selection)==null?void 0:V.version)==null?void 0:x.id,(B=o.left)==null?void 0:B.bonus,(z=(M=(C=o.right)==null?void 0:C.selection)==null?void 0:M.unit)==null?void 0:z.unit,(k=(Q=(I=o.right)==null?void 0:I.selection)==null?void 0:Q.version)==null?void 0:k.id,(m=o.right)==null?void 0:m.bonus]},()=>{l()},{immediate:!1,deep:!0})}return{updateUrl:l,initializeFromUrl:v,watchStoreChanges:d}}const qi={class:"q-pa-md container"},$i={class:"justify-center items-center unit-cards-container"},Mi={class:"text-center"},Bi={key:0,class:"entity-sliders-container"},Ni={class:"entity-slider"},Ui=fe({__name:"index",setup(e){const n=Oe(),o=G(null),{initializeFromUrl:i,watchStoreChanges:t}=xi();Ie(async()=>{await i(),t()});const a=(h,l)=>{var v,d;const s=((v=n[h])==null?void 0:v.bonus)??null;n[h]=l.unitWithEntityNumberAndBonus,l.mount_changed?n.setUnitBonus(h,s):(d=o.value)==null||d.reset(h)},r=(h,l,s)=>{var d;const v=((d=n[h])==null?void 0:d.bonus)??null;v&&(v[l]=s),n.setUnitBonus(h,v)},u=()=>{n.clearUnits()};return(h,l)=>{var d,c,g,w,$,V;const s=ge,v=go;return R(),K(me,null,[l[1]||(l[1]=A("h1",null,"TWW3 Brawl",-1)),A("div",qi,[A("div",$i,[(R(),K(me,null,be(["left","right"],x=>F(si,{orientation:x,class:qe(["unit-card",{"bg-positive":x==="left","bg-negative":x==="right"}]),modelValue:L(n)[x],"onUpdate:modelValue":B=>a(x,B)},null,8,["orientation","class","modelValue","onUpdate:modelValue"])),64))]),A("div",Mi,[F(s,{label:"Reset",color:"warning",icon:"refresh",onClick:u})]),(g=(c=(d=L(n))==null?void 0:d.left)==null?void 0:c.selection)!=null&&g.unit||(V=($=(w=L(n))==null?void 0:w.right)==null?void 0:$.selection)!=null&&V.unit?(R(),K("div",Bi,[(R(),K(me,null,be(["left","right"],x=>{var B,C,M;return A("div",Ni,[(M=(C=(B=L(n))==null?void 0:B[x])==null?void 0:C.selection)!=null&&M.unit&&L(Ae)(L(n)[x].selection.unit)>1?(R(),ue(mi,{key:0,"entity-number":L(n)[x].entityNumber,"max-entities":L(Ae)(L(n)[x].selection.unit),"onUpdate:entityNumber":z=>L(n).setUnitEntityCount(x,z)},null,8,["entity-number","max-entities","onUpdate:entityNumber"])):le("",!0)])}),64))])):le("",!0),F(v),F(Ci,{ref_key:"detailViewRef",ref:o,leftUnit:L(n).left,rightUnit:L(n).right,onUpdate:r},null,8,["leftUnit","rightUnit"]),l[0]||(l[0]=A("div",{style:{"min-height":"25vh"}},null,-1))])],64)}}}),Ei=_e(Ui,[["__scopeId","data-v-fed86ae6"]]);export{Ei as default};
